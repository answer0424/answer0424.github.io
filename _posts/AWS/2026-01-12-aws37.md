---
layout: post
title: AMI 도구 명령어
date: 2026-01-12 09:00:00 +09:00
categories: [AWS, EC2, AMI]
tags: [aws]
image:
    path: /assets/img/aws/AWS.png
---

## ec2-ami-tools-version

#### 기능

- 설치된 AMI 도구의 버전 정보를 표시함

#### 구문

```bash
ec2-ami-tools-version
```

#### 출력

- 도구 버전 정보가 출력됨 예: `ec2-ami-tools-1.5.7`

<hr>

## ec2-bundle-image

#### 기능

- 로컬 루프백 파일에서 AMI 번들 생성
- S3 기반 이미지로 사용됨

| 옵션 | 설명 |
|-|-|
| `-c` | PEM 인코딩된 RSA 공개 키 인증서 경로 |
| `-k` | PEM 인코딩된 RSA 개인 키 경로 |
| `-u` | AWS 계정 ID |
| `-i` | 번들링할 이미지 파일 경로 |
| `-d` | 번들 저장 출력 디렉터리 |
| `-r` | 아키텍처(예: `i386`, `x86_64`) |
| `-B` | 블록 디바이스 맵 지정 방법 |
| `-p` | 번들 파일 이름 접두사 |

- 이미지 번들 생성 후 S3로 업로드하고, 매니페스트가 생성됨

<hr>

## ec2-bundle-vol

#### 기능

- 실제 인스턴스의 루트 볼륨을 복사/압축/서명/암호화하여 번들을 생성
- 인스턴스 스토어 지원 AMI용 생성 방식

#### 주요 옵션

| 옵션 | 설명 |
|-|-|
| `-c` | 공개 키 인증서 |
| `-k` | 개인 키 |
| `-u` | AWS 계정 ID |
| `-d` | 번들 저장 디렉터리 | 
| `-r` | 아키텍처 |
| `-B` | 블록 디바이스 매핑 |
| `-S` | 번들 직전 실행할 스크립트 |
| `-e` | 제외할 디렉터리 |
| `-i` | 포함할 파일 | 
| `-p` | 번들 단일 접두사 |
| `-s` | 이미지 크기 |
| `-P` | 파티션 유형 |
| `-v` | 마운트된 볼륨 경로 등 |

> 기본적으로 특정 민감 파일 (예: SSH 키 등)은 자동으로 제외되며, `--no-filter`로 제외되지 않게 지정할 수도 있음

<hr>

## ec2-delete-bundle

#### 기능

- S3에 저장된 AMI 번들 파일을 삭제함
- 삭제 후 해당 AMI는 더 이상 인스턴스를 시작할 수 없음

#### 주요 옵션

| 옵션 | 설명 |
|-|-|
| `-b` | S3 버킷 이름 |
| `-a` | AWS 액세스 키 ID |
| `-s` | AWS 비밀 액세스 키 |
| `-t`| 임시 토큰 |
| `--clear` | 비어 있을 경우 버킷 삭제 |
| `--retry` | 오류 재시도 | 
| `-y` | 자동 Yes | 


<hr>

## ec2-download-bundle

#### 기능

- S3에 저장된 번들 파일을 로컬로 다운로드함
- 이후 `ec2-unbundle`로 AMI 이미지 구성 요소를 추출할 수 있음

#### 주요 옵션

- S3 bucket/path, access key/secret key, region 등 다운로드 관련 설정을 지정

<hr>

## ec2-migrate-image

#### 기능

- S3 기반 AMI의 매니페스트 파일을 다른 리전용으로 변환함
- 리전에 따라 커널/radisk ID를 자동 매핑할 수도 있음

#### 주요 옵션

| 옵션 | 설명 |
|-|-|
| `-c`/`-k` | 인증서/개인 키 |
| `-m` | 매니페스트 경로 |
| `-a`/`s` | 액세스 키/비밀 키 |
| `--region` | 대상 리전 |
| `--no-mapping` | 커널/ramdisk 자동 매핑 비활성화 |


<hr>

## ec2-unbundle

#### 기능

- S3로 업로드된 AMI 번들에서 실제 이미지 파일을 추출함
- 로컬 디렉터리로 객체를 풀어 AMI 구성 요소를 볼 수 있음

#### 주요 옵션

| 옵션 | 설명 |
|-|-|
| `-m` | 매니페스트 파일 경로 |
| `-k` | 개인 키 경로 |
| `-s` | 번들 포함 디렉터리 |
| `-d` | 추출 출력 디렉터리 |

<hr>

## ec2-upload-bundle

#### 기능

- 생성된 AMI 번들을 Amazon S3에 업로드함
- 업로드 시 적절한 ACL 권한 설정을 적용하여 EC2가 접근할 수 있게 함

#### 주요 옵션

| 옵션 | 설명 |
|-|-|
| `-b` | 업로드할 S3 버킷 |
| `-a`/`-s` | 액세스 키/비밀 키 |
| `-t` | 위임 토큰 |
| `--acl` | 객체 ACL |
| `--region` | 리전 |
| `-m` | 매니페스트 파일 |

<hr>

## 일반 옵션

| 옵션 | 설명 |
|-|-|
| `-h`/`--help` | 도움말 표시 |
| `--version` | 버전 정보 표시 |
| `--manual` | 수동 입력 모드 |
| `--batch` | 배치 모드 |
| `--debug` | 디버그 모드 활성화 |