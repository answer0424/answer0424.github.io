---
layout: post
title: Amazon EC2 AMI를 복사할 수 있는 권한 부여
date: 2026-01-16 09:00:00 +09:00
categories: [AWS, EC2, AMI, Sysprep]
tags: [aws]
image:
    path: /assets/img/aws/AWS.png
---

## 1. AMI 권한 복사란?

- 동일 리전에서 AMI 권한을 한 AMI에서 다른 AMI로 복사
- 다른 리전으로 AMI를 복사할 때 권한을 유지

> 즉, 공유 설저을 쉽게 복제하는 기능

<hr>

## 2. 사용 가능한 방법 (콘솔, CLI, API)

#### AWS Management Console

- EC2 콘솔에서 공유된 AMI를 선택
- AMI 권한 복사 옵션을 통해 대상 AMI를 선택하여 권한을 복사함

<br>

#### AWS CLI

```bash
aws ec2 modify-image-attribute \
    --image-id source-ami-id \
    --launch-permission "Add=[{UserId=account-id}]" \
    --region source-region
```

> 참고: AWS CLI 자체로 자동으로 권한을 한 AMI에서 다른 AMI로 다른 AMI로 일괄 복사하는 전용 명령이 따로 있는 것은 아니며, 소스 AMI의 launch-permission 리스트를 가져와 대상 AMI에 동일하게 설정해야 함

<hr>

## 3. 권한 복사 대상

- AMI 소유자 계정 ID
- AWS 계정 간 공유
- 공개 AMI - 모든 계정에 권한 부여

<hr>

## 4. 리전 간 권한 복사

- 리전 간 AMI 복사 API/콘솔을 사용할 경우 AWS는 기존 권한 목록도 함께 복사함
- 따라서 대상 리전의 AMI는 원본과 동일한 계정에게 공유됨

<hr>

## 5. 권한 복사시 고려 사항

#### 1) 제품 코드 & AMI 유형

- 유료 AMI의 경우 권한 복사는 제품 조건에 따라 제한될 수 있음
- 이런 AMI는 별도 라이선스 조건이 있기 때문에 무작정 다른 계정/리전으로 복사되지 않을 수 있음

<br>

#### 2) 계정 범위

- 권한이 복사된 AMI는 공유 대상 계정에서만 조회/실행 가능함
- 즉, 권한 복사 ➡️ 대상 계정이 AMI를 사용하려면 복사 대상 계정에서도 동일 리전에서 가능해야 함

<hr>

## 6. 공식 예시 - 권한 복사 흐름

#### 1. 원본 AMI 공유 설정 확인

```bash
aws ec2 describe-image-attribute \
  --image-id source-ami-id \
  --attribute launchPermission
```

