---
layout: post
title: Amazon EC2 AMI 복사 작동 방식
date: 2026-01-19 09:00:00 +09:00
categories: [AWS, EC2, AMI, copy]
tags: [aws]
image:
    path: /assets/img/aws/AWS.png
---

## 개요

- 원본 AMI와 동일하지만 별개의 AMI가 생성됨
- 이때 새로 생성된 AMI는 고유한 AMI ID를 가지며, 원본/대상 AMI는 서로 독립적으로 수정/등록/삭제할 수 있음

<hr>

## AMI 복사 시 기본 동작

#### 서로 독립적인 AMI 생성

- 대상 AMI는 원본 AMI의 정확한 복사이지만, 이후 원본 변경이 대상에 반영되지 않음
- 반대로 대상 AMI 변경도 원본에 영향 없음

<br>

#### EBS-backed AMI 

- EBS 지원 AMI를 복사하면 각 EBS 스냅샷이 동일하지만 별개의 대상 스냅샷으로 복사됨

<br>

#### 스냅샷 복사 형태

- 리전 간 복사 또는 암호화 상태 변경 시 전체 사본 생성
- 이후 추가 복사 작업은 증분 복사 방식으로 처리됨

<hr>

## 리전 간 복사 (Cross-Region Copy)

- 동일한 이미지로 글로벌 배포 가능
- 리전별 사용자에게 지연(latency) 감소/성능 향상
- 여러 리전에서 애플리케이션을 배포하여 가용성 향상

#### 리전 간 복사 주 시 주의

- 복사 전에 원본 AMI 내용이 대상 리전 환경에서도 작동하도록 설정해야 함

#### 제한

- 한 리전에서 동시 AMI 복사 작업은 최대 300개까지 지원허용

<hr>

## 계정 간 복사 (Cross-Account Copy)

- 공유된 AMI(source)를 복사하면 새 AMI(target)이 생성되고 복사한 계정이 소유자가 됨
- 이때 AMI 자체 뿐 아니라 백업 스토리지에 대한 읽기 권한도 필요함

#### 암호화된 스냅샷을 포함한 AMI의 경우

- 원본 AMI 소유자는 KMS 키도 공유해야 함

#### 참고

- 소스 AMI에 붙은 태그는 대상 AMI로 복사되지 않음

<hr>

## 시간 기반 AMI 복사 (Time-based AMI copy)

> 시간 기반 복사 작업도 가능

<hr>

## 암호화와 AMI 복사

| 복사 시나리오 | 복사 가능 여부 |
|-|-|
| 암호화 안됨 ➡️ 암호화 안됨 | O |
| 암호화 안됨 ➡️ 암호화 됨 | O |
| 암호화 됨 ➡️ 암호화 안됨 | X |
| 암호화 됨 ➡️ 암호화 됨 | O |

#### 기본동작

- 파라미터로 암호화 옵션을 지정하지 않으면 대상 AMI의 스냅샷은 원본과 동일한 암호화 상태로 복사됨


<br>

#### 암호화 옵션 지정

- 복사 시 암호화를 적용하거나 다른 KMS 키로 암호화하도록 지정할 수 있음
- 이때 대상 스냅샷은 원본 데이터와 같지만 다른 키로 암호화된 새 스냅샷으로 생성됨

