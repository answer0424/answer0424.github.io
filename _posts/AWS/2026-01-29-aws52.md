---
layout: post
title: 등록 취소로부터 Amazon EC2 AMI 보호
date: 2026-01-29 09:00:00 +09:00
categories: [AWS, EC2, AMI]
tags: [aws]
image:
    path: /assets/img/aws/AWS.png
---

## AWS EC2 AMI 등록 취소 보호란

> AMI는 EC2 인스턴스를 생성하기 위한 이미지 
>
> 이 AMI가 실수로 삭제(등록 취소)되면 향후 인스턴스 생성에 문제를 일으킬 수 있고 잘못된 삭제로 인한 서비스 영향도 발생할 수 있음
>
> 이를 방지하기 위한 기능이 등록 취소 보호 (Deregister Protection)

---

## 기능 개요

- 등록 취소 보호를 활성화하면 해당 AMI는 삭제할 수 없음
  - IAM 권한이 있어도 보호된 AMI는 취소 불가
- 등록 취소 보호를 비활성화해야만 AMI를 삭제할 수 있음

---

## 24시간 휴지 기간 옵션

- 보호 해제 이후에도 24시간 동안 보호가 유지됨
- 이 기간 동안은 AMI를 삭제할 수 없음
- 24시간이 지나야만 AMI 등록 취소가 가능

---

## 기본 설정

- 모든 기존 및 신규 AMI에서 등록 취소 보호는 기본적으로 비활성화 상태임

> 이를 필요한 AMI에 대해 수동으로 설정해야 함

---

## 등록 취소 보호 설정 방법

#### AWS Management Console

1. EC2 콘솔에서 AMI 메뉴로 이동
2. 보호할 AMI 선택
3. Actions ➡️ AMI 등록 취소 보호 관린
4. 다음중 하나 선택
    - 24시간 휴지 기간 포함하여 활성화
    - 휴지 기간 없이 활성화
5. 저장

---

#### AWS CLI

- 보호 활성화

```bash
aws ec2 enable-image-deregistration-protection \
    --image-id ami-0abcdef1234567890 \
    --with-cooldown
```

- 보호 비활성화

```bash
aws ec2 disable-image-deregistration-protection \
    --image-id ami-0abcdef1234567890
```