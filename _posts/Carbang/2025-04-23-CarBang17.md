---
layout: post
title: prototype
date: 2025-04-23 10:46 +09:00
categoties: [carbang, week04]
tags: [carbang]
---

## prototype.CalendarClose

> 특정 조건에서 캘린더 팝업을 닫는 함수

- 변수에는 현재 열려 있는 캘린더의 ID를 저장
- 조건문1: 특정 클래스가 아니고, 현재 열려있는 캘린더가 존재하며, 클릭한 요소가 캘린더의 내부가 아닐 경우
- 조건문2: 특정 클래스인 경우
- 위 조건 중 하나라도 만족하면 캘린더 요소 제거 (닫기)

➡️ 캘린더 영영 외부 클릭 또는 아이콘 클릭 시 캘린더를 닫는 역할을 하는 함수

<br>

## prototype.multicalendarClose

> 다중 캘린더 팝업을 닫는 함수

- 변수에 현재 열려 있는 다중 캘린더 id 저장
- 조건문1: 달력 팝업이 아닌 밖을 클릭했는지
- 조건문2: 닫기 버튼을 클릭했는지
- 위 두 조건이 충족 시 캘린더 닫기

➡️ 다중 날짜 선택 캘린더 팝업을 닫는 함수

<br>

## prototype.sFunction

> 가상 스크롤 처리 함수

- 입력 검증 (스크롤이 있는지)
- 페이지 및 소스 정보 저장
- 그리드 요소 가져오기
- 스크롤 관련 속성 계산
- 가상 스크롤 처리
- 스크롤이 끝까지 도달했는지 여부 확인
- 스크롤 끝 콜백 실행

➡️ 가상 스크롤 기반의 테이블/리스트 렌더링 함수 <br>
➡️ 스크롤 위치에 따라 필요한 행만 렌더링하고 스크롤 끝에 닿으면 추가 로직을 실행

☑️ 사용예시

```javascript
document.getElementById('tabScroll').addEventListener('scroll', function(e) {
    moca.sFunction(e.target);
});
```

<br>

## prototype.wFunction

> 마우스 휠 이벤트에 따라 수동으로 스크롤 위치를 조정

- 그리드 객체 가져오기
- 셀 높이 계산
- 휠 방향에 따른 스크롤 위치 계산
- 스크롤 위치 적용
- 예외 처리

➡️ 휠 이벤트 발생 시 셀 단위로 스크롤 이동시키는 함수 <br>
➡️ 1행 단위의 스크롤 구현

☑️ 사용 예시
```javascript
document.getElementBtId('gridScrollArea').addEventListener('wheel', function(e){
    moca.wFunction(e.target);
    event.preventDefault(); // 기본 휠 스크롤 막기
});
```

<br>

## prototype.genRows

> `<tr>` HTML 요소를 생성하는 함수로, 주어진 데이터를 기반으로 테이블을 HTML 문자열 형태로 만들어 반환

- 시스템 정보 세팅
- 행(`<tr>`) 생성 시작
- 셀 높이 계산 / 속성값에 높이가 있으면 계산 기본값: `26xp`
- 데이터 타입 확인
- 셀 정보 추출
- 셀 타입별 처리
- 최종 행 문자열 완성 후 반환

➡️ 테이블 행을 생성하는 함수, 주어진 데이터와 셀 속성에 따라 동적으로 HTML 행을 구성 

☑️ 사용 예시

```javascript
const rowHtml = moca.genRows(
    {name: "홍길동", age: "26", _system: {status: "C"}},
    null, null,
    myGridElement,
    "insert",
    0, 0
);
$('#myTable').append(rowHtml);
```

<br>

## prototype.getCellHeight

> 그리드 셀의 기본 높이를 가져와서 1px 증가된 값을 반환

- 그리드 객체에서 기본 셀 높이를 가져옴
- 해당 속성이 없다면 전역으로 설정된 값에서 기본 값을 가져옴
- `px` 문자열을 제거하고 숫자로 변환한 후 높이에 `1`을 더함
-

☑️ 사용 예시

```js
let gridElemetn = document.getElementById("myGrid");
let cellHeight = moca.getCellHeight(grdElement);
```

<br>

## prototype.drawGrid

> 내부 그리드 렌더링 함수인 `drawGrid_inside`를 호출하는 간단한 래퍼 함수

> 보통 외부에서 그리드를 그릴 때 호출되면 `_list`를 두 번 넘기는 구조는 필터링 전/후 데이터 또는 원본 리스트와 처리된 리스트를 구분할 필요가 있을 때 사용

- 외부에서 호출되는 `drawGrid` 함수는 내부 구현 함수인 `drawGrid_inside`를 호출

☑️ 사용 예시

```js
let dataList = getSomeData();
moca.drawGrid("myGrid", dataList, "pageContainer", "sourceId");
```
 
<br>

## 