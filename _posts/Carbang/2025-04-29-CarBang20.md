---
layout: post
title: prototype (4)
date: 2025-04-29 09:00 +09:00
categoties: [carbang, week05]
tags: [carbang]
---

## renderCheckbox

> 특정 DOM 요소에 체크박스를 렌더링
>
> 체크박스 label 요소를 동적으로 생성하여 지정된 `id`와 `label`, `onclick` 핸들러로 구성

- `id`, `label`, `onclick` 이름을 DOM 속성에서 추출
- checkbox와 label HTML 문자열 생성
- `_divObj.innerHTML`에 해당 HTML을 할당하여 DOM에 렌더링

☑️ 사용 예시

```html
<div id="chkBox1" label="동의함"></div>
<script>
    moca.renderCheckbox(document.getElementById('chkBox1'));
</script>
```

<br>

## dosort

> Moca Grid라는 커스텀 그리드 컴포넌트 안에서 테이블 정렬을 처리하는 함수

- 클릭된 요소(thisObj)와 내부 설정
- 이벤트 멈추기
- 정렬할 컬럼 찾기
  - `colgroup`안의 `col`목록과 `thead`의 `th[id]`를 가져옴
  - `th.id`를 기준으로 매핑을 만듦
  - 현재 헤더와 매칭되는 컬럼 인덱스를 찾음
  - `cellInfo`라는 객체에서 현재 컬럼에 해당하는 ID를 구함
- 정렬 대상 데이터 준비

<br>

## init

> 특정 탭 페이지 안에 있는 다양하ㅏㄴ 컴포넌트들을 찾아서 자동 렌더링 및 초기화하는 함수

- `_tabId`를 기준으로 탭 객체 찾기
- 탭 안에 있는 각 컴포넌트를 순회하며 `wframe`, `tab`, `form`, `calendar`, `combo` 등
- 모든 초기화 작업 후, `_callback` 함수 호출

☑️ 사용 예시

```js
moca.init("TAB_123", "SRC_456", "/some/url", {}, function(tabId, srcId, url) {
    console.log("탭 초기화 완료: ", tabId);
});
```

<br>

## exe

> 서버로 비동기 통신(ajax 요청)을 보내는 함수

- 로딩바 표시 여부 체크 후 로딩 표시
- 요청 타입(`POST/GET`)과 데이터 타입(`JSON`) 설정
- 페이징 정보 세팅
- 요청용 데이터 포맷팅
- 현재 페이지와 소스 ID 설정
- 진행중 메시지 출력
- 이전 요청 중복 시 `abort` 처리
- `$.ajax()` 호출

☑️ 사용 예시

```js
moca.exe({
    url: '/api/sample',
    data: {header: {}, body: {id: 123}},
    callback: function(response) {
        console.log('서버 응답:', response);
    }
}, (this));
```

<br>

## listToMap

> 리스트 형태의 데이터를 key-value 형태의 맵으로 변환

- `_option`이 있을 경우 `metaInfo`의 `codeCd`, `codeNm`을 기준으로 매핑
- 없을 경우 `filterableId` 필드를 기준으로 key와 value를 동일하게 설정
  
☑️ 사용 예시

```js
const list = [{code: 'A1', codeNm: 'Apple'}, {code: 'B2', codeNm: 'Banana'}];
const map = moca.listToMap(list, {metaInfo: {codeCd: 'code', codeNm: 'codeNm'}});
// 결과: {A1: 'Apple', B2: 'Banana'}
```
