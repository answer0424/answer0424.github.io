---
layout: post
title: moca.prototype (8)
date: 2025-05-13  09:00 +09:00
categoties: [cbcp, week07]
tags: [cbcp]
---

## moca.prototype.renderMocaLabel

> 주어진 객체 `o`의 정보를 기반으로 Moca 스타일의 라벨 컴포넌트를 HTML 문자열로 생성

- HTML 문자열 초기화
- div.mocaLabel 생성
  - 클래스는 `mocaLabel` + `o.addClass`
  - `onclick` 속성에 `o.onclick(this)` 함수 설정
- 내부 span.label 생성
- 최종 HTML 반환

☑️ 사용 예시

```js
const labelHTML = moca.prototype.renderModalLabel({
    id: 'myLabel', 
    value: '라벨 텍스트',
    addClass: 'highlight',
    style: 'color:red;',
    onclick: 'handleLabelClick'
});

// 결과
// <div class="mocaLabel highlight" onclick="handleLabelClick(this)" style="color: red;">
//   <span id="myLabel" class="label" name="myLabel">라벨 텍스트</span>
// </div>
```

<br>

## moca.prototype.renderMocaInput

> moca 프레임워크에서 커스텀 인풋 UI를 생성하는 함수로 주어진 속성을 기반으로 `input[type="text"]` 엘리먼트를 포함하는 HTML 렌더링함

- `o.tagName == 'DIV`인 경우 
  - `getAttribute`로 여러 속성들을 받아와 input HTML 문자열 구성
  - `readonly`, `disabled`, `maxlength`, `keyMask` 등의 처리
  - `blur` 이벤트 시 `moca.setValue()` 호출
  - `keydown` 이벤트에 `moca.ketdown()` 호출
- 그 외 일반 JS 객체인 경우
  - `value`, `readonly`, `innerStyle`등 직접 참조

☑️ 사용 예시

```js
const inputHtml = moca.renderMocaInput({
  id: "username",
  value: "test123",
  readonly: "true",
  innerClass: "input-box",
  style: "width:100%;",
  onclick: "handleInputClick"
});
document.getElementById("container").innerHTML = inputHtml;
```

<br>

## moca.prototype.renderMocaInputButton

> 텍스트 입력 필드와 함께 버튼을 생성하는 Moca 컴포넌트

- DOM Element(`div`) 기반 렌더링
  - `getAttribute`로 속성 추출
  - `required="true"`인 경우 부모 `DIV`에 `req` 클래스 추가
  - `input` 요소 생성
  - `callFuntion`이 정의되어 있으면 `button`도 생성되어 `onclick` 속성 바인딩
- 일반 객체 기반 렌더링

☑️ 사용 예시

```js
const html = moca.renderMocaInputButton({
  id: "searchInput",
  value: "apple",
  callFunction: "doSearch",
  innerClass: "input-text",
  innerStyle: "width: 150px;",
  addClass: "bordered"
});
document.getElementById("container").innerHTML = html;
```

<br>

## moca.prototype.renderMocaCombo

> 드롭다운 선택 요소인 `<select>` 컴포넌트를 생성하는 함수

- 입력 파라미터 추출
  - `o` 객체에서 여러 속성 값을 읽어들임
  - `itemset`이 제공되면, 해당 값을 JSON 형식으로 파싱하여 선택 목록을 생성
  - `allOption`이 제공되면, 해당 옵션을 드롭다운의 첫번째 옵션으로 추가
- HTML 생성
- 옵션에 대한 추가 설정
  - `disaplayFormat`이 제공되면, `[value]`와 `[label]`을 대체하여 옵션 레이블을 포맷
- 결과 반환

☑️ 사용 예시

```html
<div    id="comboBox"
        value="100"
        required="true"
        style=="width: 200px;"
        itemset='[{"cd":"100", "nm":"Option 1", "checked": "true"}, {"cd": 200", "nm": "Option 2", "checked": "false"}]'
        cdField="cd"
        nmField="nm"
        displayFormat="[label] - [value]"
        onchange="handleComboChange"
></div>

<script>
    const comboElement = document.getElementById("comboBox");
    const html = moca.renderMocaCombo(comboElement, 'page1', 'src1');
    comboElement.innerHTML = html;
</script>
```

<br>

## moca.prototype.telFormat

> 입력받은 전화번호 문자열을 형식에 맞게 변환

- 입력 값 처리 (`-`을 제거)
- 전화번호 길이에 따라 처리
- 결과 반환

☑️ 사용 예시

```js
let formattedPhone = moca.telFormat("01012345678");
console.log(formattedPhone);    // 010-1234-5678

formattedPhone = moca.telFormat("0212345678");
console.log(formattedPhone);    // 02-1234-5678

formattedPhone = moca.telFormat("+821012345678");
console.log(formattedPhone);    // +82-101-2345-678
```

<br>

## moca.prototype.submit

> 주어진 URL로 데이터를 `POST` 방식으로 전송하는 기능을 수행

- 폼 생성
  - 새로운 `<form>` 요소를 생성하고, 해당 폼의 `charset`, `method`, `action` 속성을 설정
- iframe 생성
  - 숨은 iframe 요소를 생성하고 이를 `body`에 추가
- 입력 값 처리
  - 주어진 파라미터 객체 (`_param`)에서 키-값 쌍을 가져와 각 항목을 `<input type="hidden">` 필드로 추가
- 폼 제출

☑️ 사용 예시

```js
let params = {
    userId: "exampleUser",
    action: "submitForm",
};

moca.submit('https://example.com/submit', params, '_hiddenIframe');
```

<br>

## moca.prototype.setValue

> 컴포넌트의 값을 설정하거나, 특정 형식에 맞춰 표시하는 기능을 수행

- 컴포넌트 선택
  - `__comp`가 jQuery 객체라면 `__comp[0]`으로 DOM 객체를 선택
  - `__value`가 `null`이면, 해당 컴포넌트의 기존 값을 사용
- 입력 필드 처리
  - `inputCalendar` 타입의 컴포넌트는 `moca.getDisplayFormat_value` 함수를 사용해 값을 포맷팅
- 콤보 박스 처리
  - 콤보 박스 타입의 컴포넌트`(combo)`에서는 선택된 값을 설정
  - `displayFunction`을 사용하여 값을 표시 가능
- 라디오 버튼 처리
- 일반 입력 필드 처리
- 값의 길이가 다른 경우
  - 값의 길이가 변경되었을 경우, `displayChar`가 부모 요소에 설정되어 있음

☑️ 사용 예시

```js
let inputElement = document.getElementById('myInput');
moca.setValue(inputElement, '12345', '###-###');
```

<br>

## moca.prototype.onRowClick

> HTML 테이블의 행을 클릭했을 때, 해당 행을 강조 표시하고 이전에 강조되었던 행의 스타일을 초기화하는 기능을 수행

- 