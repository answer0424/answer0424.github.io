---
layout: post
title: VESUtil (2)
date: 2025-05-30  09:00 +09:00
categoties: [cbcp, week09]
tags: [cbcp]
---

#### getKakaoCertStatus()

> 카카오페이 인증상태 조회

- 입력 파라미터에서 `tx_id`를 추출
- 추출한 `tx_id`를 쿼리 파라미터로 설정하고 HTTP GET 요청
- GET 요청으로 API 호출
- 응답 본문을 UFT-8로 읽어 `result`에 저장
- 응답 `JSON`을 `Map`으로 변환
- 이중 척번째 signed_data 항목을 `rtnMap`으로 리턴

<br>

#### getDtmFromMill()

> 밀리초 단위의 시간을 `yyyyMMddHHmmss` 형식의 문자열로 변환하는 역할

- 입력 문자열을 `long`형 밀리초로 변환
- 밀리초를 `Timestamp`로 변환
- 지정된 포맷으로 문자열 생성

<br>

#### callRestApi()

> 외부 REST API 호출

- post 데이트`paramMap`, 호출 URL `sendUrl`, Content-Type `contentType`
- HTTP 연결 (POST 방식, Content-Type 세팅)
- REST API 호출 후 `BufferedWriter`를 통해 `jsonStr`에 `JSON` 형식으로 전송
- `BufferedReader`를 통해 `jsonStr`에 `JSON` 형식으로 저장

<br>

#### isFrnr()

> 외국인 등록 번호 여부 확인

<br>

#### inqVhclRegLdg()

> 자동차 등록원부 조회

- 등록원부 조회 맵 `regLdgMap`
- 등록원부 조회 맵에서 차량번호, 차량소유자명, 조회 프로그램 구분 코드, 갑부 을부 추출
- 추출한 데이터의 입력값 검증
- 재조회를 위한 `for문`
  - 이름을 변경 후 재조회할 경우 DB에 2번 저장
  - 나이스디앤알(`inqVhclRegLdg_NICE`) / 쿠콘(`inqVhclRegLdg_coocon`) 요청인지 확인
  - 이름에 (주)가 들어갔을 경우 변경하여 재조회

<br>

#### 