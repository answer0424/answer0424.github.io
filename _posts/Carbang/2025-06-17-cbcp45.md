---
layout: post
title: 인앱 브라우저에서 외부브라우저 띄우기
date: 2025-06-16  09:00 +09:00
categoties: [cbcp, week12]
tags: [cbcp]
---

## 개요

> 웹 어플리케이션에서 사용자 경험을 높이는 방법 중 하나는 정보를 다른 사람과 손쉽게 공유할 수 있도록 만드는 것

- 공유하기 기능 개발
- 공유된 페이지에서 다른 메뉴로 이동 불가
- 공유된 페이지 url 암호화

<br>

## 문제점

- 공유하기 기능은 Web Share API를 이용해서 해결
- 라인/카카오톡 인앱 브라우저 내에서 첨부파일 다운 불가
  - 라인/카카오톡 인앱 브라우저 인식 방법
- 파일명 백슬래시, 작은따옴표 존재할 경우 인식 불가
- 파일 다운로드 방법

<br>

## 해결 방법 1 (Web Share API)

- 모바일 환경에서 별도 앱이나 복잡한 과정을 거치지 않고 네이티브 공유 기능을 사용 가능


#### 코드 요약
```js
if(!noticeId) {
    alert('안내사항', '공유할 공지사항이 존재하지 않습니다.');
    return;
}

const encryptedId = utils.crypURICmp(noticeId);
const shareUrl = '공유할 URL';

try {
    if(navigator.share) {
        await navigator.share ({
            title: title,
            text: text,
            url: shareUrl,
        });
    } else {
        await navigator.clipboard.writeText(shareUrl);
        alert('안내사항', '공유 링크가 클립보드에 복사되었습니다.');
    }
} catch (err) {
    console.error('공유실패: ' , err);
}
```

#### 코드 흐름 분석

- 공유 URL 생성
  - 공유할 링크에 보안을 더하기 위해 `noticeId`를 암호화

- Web Share API를 통한 공유
  - navigator.share를 사용하여 공유 가능
  - 브라우저가 `Web Share API`를 지원할 경우에면 사용 가능

- 대체 처리
  - 클립보드 URL 복사

<br>

## Web Share API 란

> 웹 페이지에서 모바일 디바이스의 기본 공유 기능을 사용할 수 있게 해주는 API (카카오톡, 문자, 메일)

- 사용 조건
  - HTTPS 환경
  - 사용자 제스처와 함께 사용 (예: 클릭 이벤트)
  - 일부 데스크탑 브라우저는 아직 지원하지 않음(모바일 중심)

<br>