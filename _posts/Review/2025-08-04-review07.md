---
layout: post
title: 리스트 렌더링
date: 2025-08-04 13:00 +09:00
categories: [React_re, UI expression]
tags: [react]
image:
    path: /assets/img/react/React.png
---

## 리스트 렌더링

> JavaScript 배열 메서드를 사용하여 데이터 배열을 조작할 수 있음
>
> React에서 `filter()`와 `map()`을 사용해 데이터 배열을 필터링하고 컴포넌트 배열로 변환

<br>

## 배열을 데이터로 렌더링하기

- 아래 처럼 내용이 있는 리스트가 있다고 가정

```html
<ul>
  <li>Creola Katherine Johnson: mathematician</li>
  <li>Mario José Molina-Pasquel Henríquez: chemist</li>
  <li>Mohammad Abdus Salam: physicist</li>
  <li>Percy Lavon Julian: chemist</li>
  <li>Subrahmanyan Chandrasekhar: astrophysicist</li>
</ul>
```

> 이러한 리스트 항목의 유일한 차이점은 콘텐츠, 즉 데이터

<br>

#### 1. 데이터를 배열로 이동

```jsx
const people = [
  'Creola Katherine Johnson: mathematician',
  'Mario José Molina-Pasquel Henríquez: chemist',
  'Mohammad Abdus Salam: physicist',
  'Percy Lavon Julian: chemist',
  'Subrahmanyan Chandrasekhar: astrophysicist'
];
```

<br>

#### 2. `people`의 요소를 새로운 JSX 노드 배열인 `listItems`에 매핑

```jsx
const listItems = people.map(person => <li>{person}</li>);
```

<br>

#### 3. `<ul>`로 래핑된 컴포넌트의 `listItem`를 반환

```jsx
return <ul>{listItems}</ul>;
```

#### 4. 통합

```jsx
const people = [
    'Creola Katherine Johnson: mathematician',
    'Mario José Molina-Pasquel Henríquez: chemist',
    'Mohammad Abdus Salam: physicist',
    'Percy Lavon Julian: chemist',
    'Subrahmanyan Chandrasekhar: astrophysicist'
];

export default function List() {
    const listItems = people.map(person => <li>{person}</li>);

    return <ul>{listItems}</ul>;
}
```

> 위 코드에서는 화면은 렌더링되나, `Each child in a list should have a unique "key" prop` 이라는 콘솔 에러가 뜨고 있음
{: .prompt-danger }

<br>

## 추가: 배열 항목들을 필터링하기

```jsx
const people = [{
  id: 0,
  name: 'Creola Katherine Johnson',
  profession: 'mathematician',
}, {
  id: 1,
  name: 'Mario José Molina-Pasquel Henríquez',
  profession: 'chemist',
}, {
  id: 2,
  name: 'Mohammad Abdus Salam',
  profession: 'physicist',
}, {
  id: 3,
  name: 'Percy Lavon Julian',
  profession: 'chemist',
}, {
  id: 4,
  name: 'Subrahmanyan Chandrasekhar',
  profession: 'astrophysicist',
}];
```

- 조건
  - 직업이 `chemist`인 사람들만 표시
- 사용
  - JavaScript의 `filter()` 메서드를 사용하여 해당 사람만 반환

<br>

#### 1. `people`에서 `filter()`를 호출해 `person.profession === 'chemist'`로 필터링해서 `chemist`로만 구성된 새로운 배열 생성

```jsx
const chemists = people.filter(person =>
    person.profession === 'chemist'
);
```

<br>

#### 2. `chemists`를 매핑

```jsx
const listItems = chemists.map(person =>
    <li>
        <img
            src={getImageUrl(person)}
            alt={person.name}
        />
        <p>
            <b>{person.name}</p>
            {' ' + person.profession + ' '}
            known for {person.accomplishment}
        </p>
    </li>
);
```

<br>

#### 3. 마지막으로 컴넌트에서 `listItems`를 반환

```jsx
return <ul>{listItems}</ul>;
```

<br>

> 화살표 함수는 암시적으로 `=>` 바로 뒤에 식을 반환하기 때문에 `return`문이 필요하지 않음
>
> ```jsx
> const listItems = chemists.map(person => 
>    <li>...</li>
> );
> ```
>
> 하지만 `=>` 뒤에 `{` 중괄호가 오는 경우 `return`을 명시적으로 작성해야 함
>
> ```jsx
> const listItems = chemists.map(person => {
>    return <li>...</li>;
> });
> ```
>
> `=> {`를 표현하는 화살표 함수는 `block body`를 가지고 있다고 말함
>
> 이 함수를 사용하면 한 줄 이상의 코드를 작성할 수 있으나 `return`문을 반드시 작성해야 함

<br>

## `key`를 사용해서 리스트 항목을 순서대로 유지하기

- 각 배열 항목에 다른 항목 중에서 고유하게 식별할 수 있는 문자열 또는 숫자를 `key`로 지정해야 함

```jsx
<li key={person.id}>...</li>
```

> `map()` 호출 내부의 JSX 엘리먼트에는 항상 key가 필요함
{: .prompt-info }

- key는 각 컴포넌트가 어떤 배열 항목에 해당하는지 React에 알려주어 나중에 일치시킬 수 있도록 함
- `key`를 잘 선택하면 React가 정확히 무슨 일이 일어났는지 추론하고 DOM 트리에 올바르게 업데이트하는데 도움이 됨

<br>

> #### 각 리스트 항목에 대해 여러 DOM 노드 표시하기
>
> 각 항목이 하나가 아닌 여러 개의 DOM 노드를 렌더링 해야 하는 경우
>
> 짧은 `<> </>` fragment 구문으로는 key를 전달할 수 없으므로 key를 단일 `<div>`로 그룹화하거나 약간 더 길고 명시적인 `<Fragment>` 문법을 사용해야 함
>
> ```jsx
> import { Fragment } from 'react';
> 
> // ..
> 
> const listItems = people.map(person =>
>   <Fragment key={person.id}>
>       <h1>{person.name}</h1>
>       <p>{person.bio}</p>
>   </Fragment>       
> )
> ```
>
> Fragment는 DOM에서 사라지므로 `<h1>`, `<p>`. `<h1>`, `<p>` 등의 평평한 리스트가 생성됨
{: .prompt-tip }

<br>

## `key`를 가져오는 곳

데이터 소스마다 다른 key 소스를 제공

- 데이터베이스의 데이터: 데이터베이스에서 데이터를 가져오는 경우 본질적으로 고유한 데이터베이스 key/ID를 사용할 수 있음
- 로컬에서 생성된 데이터: 데이터가 로컬에서 생성되고 유지되는 경우 (예: 메모 작성 앱의 노트), 항목을 만들 때 증분 일련번호나 `crypto.randomUUID()` 또는 `uuid` 같은 패키지를 사용

<br>

## key 규칙

- key는 형제 간에 고유해야 함
- key는 변경되어서는 안되며, 그렇게 되면 key는 목적에서 어긋남

<br>

## React에서 key가 필요한 이유

> 파일이 삭제되거나 중간에 추가될 경우에 고유하고 식별할 수 있는 key없다면 매우 혼란스러워질 수 있음

> 주의!!
> `key`를 전혀 지정하지 않는다면 React는 인덱스를 사용
>
> 하지만 항목이 삽입되거나 삭제하거나 배열의 순서가 바뀌면 시간이 지남에 따라 항목을 렌더링하는 순서가 변경됨
>
> 마찬가지로 `key={Math.random()}`처럼 즉석에서 key를 생성하지 말 것