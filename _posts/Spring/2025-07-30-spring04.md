---
layout: post
title: 의존성 주입
date: 2025-07-30 13:00 +09:00
categories: [Spring, IoC Container(dependency)]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 의존성 주입이란?

- 객체가 직접 의존 객체를 생성하거나 조회하는 대신 
- Spring 컨테이너가 객체(빈)를 생성할 때 필요한 **의존성을 자동으로 주입**
- 이것은 **제어의 역전(IoC: Inversion of Control)**의 한 형태

<br>

## DI의 이점

- 결합도 낮춤: 객체는 자신이 사용한 클래스의 구체적인 구현을 알 필요가 없음
- 유지보수 용이: 코드 변경 없이 설정만 바꾸면 다른 구현체로 대체 가능
- 테스트 용이: 모의 객체(mock)를 쉽게 주입 가능
- 코드 깔끔함: 객체가 스스로 의존 객체를 찾지 않음

<br>

## DI의 주요 방식

#### 1. 생성자 기반 주입

- 필수 의존성을 보장하기 위해 권장되는 방식
- 객체가 생성될 때 모든 의존성이 전달됨

```java
public class SimpleMovieLister {
    private final MovieFinder movieFinder;

    public SimpleMovieLister(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}
```

- XML 설정 예:

```xml
<bean id="beanOne" class="x.y.ThingOne">
    <constructor-arg ref="beanTwo">
    <constructor-arg ref="beanThree">
</bean>
```

인수 매핑 방식

- 타입 기준 자동 매핑
- 명시적 지정: `type`, `index`, `name` 속성

```xml
<constructor-arg type="int" value="750000"/>
<constructor-arg type="1" value="42"/>
<constructor-arg type="years" value="750000"/>
```

<br>

## 세터 기반 주입 

- 선택적 의존성을 주입할 때 사용
- 객체 생성 후 setter로 값 설정

```java
public class SimpleMovieLister {
    private MovieFinder movieFinder;

    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}
```