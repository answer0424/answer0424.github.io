---
layout: post
title: Autowiring Collaborators
date: 2025-09-15 13:00 +09:00
categories: [Spring, IoC Container, dependencies]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## Autowiring의 정의 및 장점

- 컨테이너(`ApplicationContext`)가 빈(bean)의 의존(collaborator) 객체들을 자동으로 찾아 주입
- 수작업으로 `setter`나 `constructor-arg`또는 `ref`등을 일일이 작성하는 부담을 줄여줌
- 개발 초기 단계에서는 의존성이 추가되거나 클래스가 바뀌어도 설정을 많이 바꾸지 않아도 됨

<br>

## XML 기반 설정에서의 Autowire 모드들(Bean 정의 시 `autowire` 속성 사용)

| 모드             | 동작 방식 |
| --------------- | --- |
| **no**          | 자동 주입 없음. 기본값. 모든 빈 참조를 명시적으로 설정해야 함 |
| **byName**      | 속성의 이름(property name)과 동일한 이름을 가진 빈(bean)을 찾아 주입함. 예: `setMaster(..)`이 있으면 빈 이름 `master`가 있으면 그것을 주입 |
| **byType**      | 속성(property)의 타입(type)과 동일한 빈이 정확히 하나 있는 경우 그 빈을 주입. 빈이 여러개면 예외(ambiguous) 발생. 빈이 하나도 없으면 그냥 안 주입됨 |
| **constructor** | 생성자 인자(constructor arguments)에 대해 타입 기반(byType)으로 주입. 생성자 파라미터 타입에 맞는 빈이 정확히 하나 있어야 함. 여러개면 예외 |

> `byType`과 `constructor` 모드에서는 컬렉션(collection)이나 배열, `Map<String, T>` 등의 타입도 지원

<br>

## Autowiring의 한계와 단점

- 항상 명확한 참조보다 덜 명확해짐, 빈과 빈 사이의 관계가 설정 파일 또는 코드 상에 드러나지 않을 수 있음
- 타입 기반 주입 시, 동일한 탕비의 빈이 여러 개일 경우 문제가 생김(ambiguity)
- `String`, `int` 혹은 단순한 primitive 타입, 클래스 타입 등의 간단한 타입은 자동 주입 대상이 아님

<br>

## Autowiring 후보(bean) 제어하기

- XML 설정에서 `<bean> ... autowire-candidate="false">` 식으로 지정하면 그 빈은 자동 주입 대상에서 제외
- `deafult-autowire-condidates` 속성 이용: 빈 이름 패턴 기준으로 자동 주입 가능
- `@Bean` 어노테이션을 사용하는 경우 `autowireCandidate` 속성이 있으면 `defaultCandidate`라는 속성이 추가됨
- `qualifier`(예: `@Qulifier`) 사용 시 defaultCandidate가 false인 빈도 qualifier를 지정한 경우에만 주입 가능하도록 할 수 있음