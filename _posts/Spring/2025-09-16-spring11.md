---
layout: post
title: Using @Autowired
date: 2025-09-16 09:00 +09:00
categories: [Spring, IoC Container, Annotation_based container]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개념 개요
- `@Autowired`는 Spring Framework에서 의존성 주입(dependency injection)을 위해 사용하는 어노테이션
- JSR-330의 `@Inject`와 유사한 역할, 실제 공식문서에도 `@Inject`를 `@Autowired` 대체해도 된다고 명시
- 해당 어노테이션은 필드, 생성자, 메서드에 적용 가능하며, Spring이 자동으로 의존성을 주입하도록 함

<br>

## 적용 위치

#### 생성자(constructor)

```java
public class MovieRecommender {
    private final CustomerPreferenceDao customerPreferenceDao;

    @Autowired
    public MovieRecommender(CustomerPreferenceDao customerPreferenceDao) {
        this.customerPreferenceDao = customerPreferenceDao;
    }
}
```

- Spring 4.3부터는 생성자가 하나뿐인 경우 `@Autowired` 생략 가능

<br>

#### setter 메서드

```java
public class SimpleMovieLister {
    private MovieFinder movieFinder;

    @Autowired
    public void setMovieFinder(MovieFinder movieFinder) {
        this.movieFinder = movieFinder;
    }
}
```

<br>

#### 일반 메서드(다수의 인자를 가질 수 있음)

```java
@Autowired
public void perpare(MovieCatalog catalog, CustomerPreferenceDao CustomerPreferenceDao) {
    this.movieCataLog = movieCatalog;
    this.customerPreferenceDao = CustomerPreferenceDao;
}
```

<br>

#### 필드(field) - 권장안함

```java
public class MovieRecommander {
    @Autowired
    private CustomerPreferenceDao customerPreferenceDao;
    // 생성자 주입 + 필드 주입 같이 사용 가능
}
```

<br>

## 주입 가능한 타입들 및 컬렉션

- 타입에 맞는 빈이 여러개 있을 경우, 컬렉션(Collection), 배열(Array), Map으로 주입 가능

```java
@Autowired
private MovieCaralog[] moviecaralogs;

@Autowired
private Set<MovieCatalog> moviecaralogsSet;

@Autowired
private Map<String, MovieCatalog> moviecaralogsMap;
```

- `@Order` 또는 `@Priority` 어노체이션 또는 `Ordered` 인터페이스를 빈 클래스에 붙이면, 컬렉션 요소들의 순서를 제어할 수 있음

<br>

## 의존성 주입이 필수인가 vs 선택적인가

- 기본적으로 `@Autowired`는 필수 의존성 주입
- 하지만 `required=false` 옵션을 주면 선택적 의존성 주입 가능
- 또는 `Optional<T>` 타입 또는 `@Nullable`을 사용해도 선택적 주입 가능

<br>

## 생성자 관련 규칙(Constructor resolution)

- 여러 생성자가 있는 클래스일 경우 적어도 하나의 생성자에 `@Autowired` 필요
- 만약 생성자가 딱 하나만 있다면 `@Autowired` 생략 가능(Spring 4.3부터)

<br>

## self-injection / 구성 클래스 내의 빈 주입

- `@Autowired`는 "self-injection"도 인식, 즉 빈이 자기 자신을 주입 받는 경우도 고려됨
  - 예를 들어, `@Configuration` 클래스 내에서 `@Bean` 메서드 간에 의존성이 있을 때
- 주로 프록시(proxy)를 통한 호출 등 특수한 경우에 사용