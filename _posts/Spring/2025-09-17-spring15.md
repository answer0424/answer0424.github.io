---
layout: post
title: Classpath Scanning and Managed Components
date: 2025-09-17 09:00 +09:00
categories: [Spring, IoC Container, Annotation_based container]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 사용 이유

> 스프링에서 빈을 등록할 때 옛날엔 XML 설정 파일에 하나하나 <bean> 태그를 사용해서 등록했지만
>
> 빈 수가 많아지면 관리가 복잡해지고 귀찮아지기까, 자동으로 특정 기준에 맞는 클래스를 찾아서 빈으로 등록해주는 기능이 생김
>
> 그 기능이 클래스패스 스캐닝(classpath scanning)이고 자동으로 관리되는 컴포넌트를 찾아 빈 정의(BeanDefinition)으로 등록하는 방식

<br>

## 주요 기능 / 요소들

| 기능/요소                             | 설명                                                                                                                                   |
| ------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| @Component 및 스테레오타입 어노테이션 | `@Component`는 가장 일반적인 컴포넌트 마커, `@Service`, `@Repository`, `@Controller` 등은 특정 역할을 나타내는 스테레오타입 어노테이션 |
| 메타 어노테이션, 구성 어노테이션      | `@Component`를 메타 어노테이션으로 사용하는 어노테이션을 직접 만들 수 있음                                                             |
| 필터 (Include/Exclude)                | 스캐닝 시 특정 조건에 맞는 클래스만 포함하거나 제외하는 필터 설정 가능                                                                 |
| 기본 스캐닝 범위                      | 보통 `@ComponentScan` 또는 `<context:component-scan>` 설정에서 지정한 패키지와 그 하위 패키지를 스캔                                   |

<br>

## 사용 예시

```java
@Configuration
@ComponentScan(basePackages = "com.example.myapp.services")
public class AppConfig {
    // 필요하면 필터도 추가 가능
}
```

- `AppConfig` 클래스에 `@ComponentScan`이 있고, basePackages를 `com.example.myapp.services`로 지정
- 스프링이 시작할 떄 이 패키지 내의 클래스들을 찾아서 `@Component`, `@Service`, `@Repository`, `@Controller` 등이 붙은 클래스를 빈으로 자동 등록
- 예: `com.exmaple.myapp.services.UserService` 클래스에 `@Service`가 붙어 있으면 빈으로 등록

<br>

## 장단점

#### 장점

- 빈 등록을 자동화해서 설정 코드 XML 간소화
- 개발 생상성 향상 + 유지보수 용이
- 코드가 붙이는 어노테이션 중심으로 역할이 분명히 드러남

<br>

#### 단점

- 지나치게 많은 패키지를 스캔 대상으로 지정하면 애플리케이션 시작 시간이 느려질 수 있음
- 의도치 않게 빈이 등록되는 경우 생길 수 있음
- 필터 설정이나 패키지 구조를 명확히 하여 스캔 범위를 관리함

