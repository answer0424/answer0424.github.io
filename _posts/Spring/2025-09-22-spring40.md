---
layout: post
title: 선언적 트랜잭션 롤백
date: 2025-09-22 09:00:00 +09:00
categories: [Spring, DataAccess, Transaction Management, Declarative Transaction Management]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 핵심 내용

#### 기본 롤백 동작(Default Rollback Behavior)

- 트랜잭션 경계 안에서 `RuntimeException` 또는 `Error`가 던져지면 기본적으로 롤백
  - 즉, `unchecked exception`과 `에러`에 대해서만 자동 롤백됨
- 반대로 `checked exception`(예: 예외클래스가 `Exception`을 상속하지만 `RuntimeException`이 아닌 경우)가 던져지면, 기본 구성에서는 롤백되지 않음

<br>

#### 롤백 규칙의 사용자 지정

- `rollback-for` 속성 혹은 `@Transactional` 속성으로 checked exception도 롤백 대상에 포함시킬 수 있음
  - 예를 들어, 애플리케이션 정의 예외를 체크 예외라 하더라도 롤백되도록 할 수 있음
- 반대로 `no-rollback-for`또는 `noRollbackFor` 속성으로 특정 예외가 발생해도 롤백하지 않게 지정 가능함

<br>

#### 가장 강한 규칙 우선 적용됨

- 여러 예외 규칙이 지정되어 있을 떄, thrown된 예외에 대해 여러 규칙이 일치 가능 ➡️ 그 중 가장 구체적이고 가장 강한 규칙이 롤백 여부를 결정
  - 예를 들어, `rollback-for="Throwable"`과 `no-rollback-for="SomeSpecificException"`같이 둘이 혼합되면, `SomeSpecificException`이 던져졌을 때 `no-rollback-for`가 더 구체적으로 롤백하지 않음

<br>

#### 