---
layout: post
title: Advising Transactional Operations
date: 2025-09-22 09:00:00 +09:00
categories: [Spring, DataAccess, Transaction Management, Declarative Transaction Management]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 핵시 내용 정리

> 트랜잭션 뿐만 아니라, 다른 어드바이스도 함께 적용하고 싶을 때 어떻게 설정하고 실행 순서를 제어할 수 있는지 보여줌
>
> 예를 들어, 트랜잭션 + 프로파일링 같은 추가 기능을 조합하고 싶은 경우


<br>

## 주요 포인트

#### 추가 어드바이스 사용 예

- `SimpleProfiler`라는 profiling aspect를 정의해서, 메서드 호출 전체 + 트랜잭션 + 실제 메서드 실행 순으로 동작하게 함

<br>

#### Advice 순서 제어

- `Ordered` 인터페이스 또는 `order` 속성을 사용해서 어떤 어드바이스가 먼저 실행되고 나중에 실행될지 지정 가능
- 예: profiling 어드바이스가 트랜잭션 어드바이스보다 먼저 실행되게 설정


<br>

#### XML 설정 예시

- `<tx:annotation-driven transaction-manager="txManager" order="200"/>`와 `<aop:config>` 내에서 profiling aspect 및 트랜잭션 advice를 포인트컷과 order조합으로 구성한 XML 설정 예시가 나옴

<br>

#### 실행 흐름

1) profiling aspect 시작
2) 트랜잭션 시작
3) 메서드 실행
4) 트랜잭션 커밋
5) profiling aspect가 종료 및 전체 실행 시간 측정 보고

<br>

## 정리

> Advising Transactional Operations는 트랜잭션 어드바이스 외에 다른 어드바이스를 함께 적용하고, `order/Ordered` 등을 이용해 실행 순서를 제어하여 프로파일링 ➡️ 트랜잭션 ➡️ 메서드 실행 ➡️ 트랜잭션 커밋 ➡️ 프로파일링 종료 같은 복합 흐름을 구성할 수 있게 해주는 설정 방법

