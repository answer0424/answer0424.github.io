---
layout: post
title: JDBC 작업을 Java 객체로 모델링
date: 2025-09-23 09:00:00 +09:00
categories: [Spring, DataAccess, JDBC]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## `RowMapper`를 활용한 객체 매핑

> `RowMapper`는 `JdbcTemplate`의 `query()` 메서드와 함께 사용되어, `ResultSet`의 각 행을 자바 객체로 변환하는 역할
>
> 주로 단일 행 또는 여러 행의 결과를 객체로 매핑할 때 사용

<br>

## 예시 코드

```java
public class ActorRowMapper implements RowMapper<Actor> {
    @Override
    public Actor mapRow(ResultSet rs, int rowNum) throws SQLException {
        Actor actor = new Actor();
        actor.setId(rs.getLong("id"));
        actor.setFirstName(rs.getString("first_name"));
        actor.setLastName(rs.getString("last_name"));
        return actor;
    }
}
```

<br>

```java
List<Actor> actors = jdbcTemplate.query("SELECT * FROM actors", new ActorRowMapper());
```

- 또한 `RowMapperResultSetExtractor`를 사용하여 `ResultSet` 전체를 한 번에 처리할 수도 있음

```java
RowMapperResultSetExtractor<Actor> extractor = new RowMapperResultSetExtractor<>(new ActorRowMapper());
List<Actor> actors = jdbcTemplate.query("SELECT * FROM actor", extractor);
```

<br>

## `ResultSetExtractor`를 활용한 객체 매핑

> `ResultSetExtractor`는 `JdbcTemplate`의 `query()` 메서드와 함께 사용되어 전체 `ResultSet`을 하나의 객처로 변환하는 역할
>
> 복잡한 결과 구조를 처리하거나, 여러 행의 결과를 하나의 객체로 매핑할 때 유용

<br>

## 예시 코드

```java
public class ActorListExtractor implements ResultSetExtractor<List<Actor>> {
    @Override
    public List<Actor> extractData(ResultSet rs) throws SQLException, DataAccessException {
        List<Actor> actors = new ArrayList<>();
        while(rs.next()) {
            Actor actor = new Actor();
            actor.setId(rs.getLong("id"));
            actor.setFirstName(rs.getString("first_name"));
            actor.setLastName(rs.getString("last_name"));
            actors.add(actor);
        }
        return actors;
    }
}
```

```java
List<Actor> actors = jdbcTemplate.query("SELECT * FROM actors", new ActorListExtractor());
```

<br>

## 요약

- `RowMapper`: `ResultSet`의 각 행을 개별 객체로 매핑하는 데 사용(단순한 매핑에 적합)
- `ResultSetExtractor`: 전체 `resultSet`을 하나의 객체로 매핑하는 데 사용(복잡한 결과구조를 처리할 때 사용)