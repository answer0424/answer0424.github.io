---
layout: post
title: JPA
date: 2025-09-23 09:00:00 +09:00
categories: [Spring, DataAccess, Transaction Management, ORM]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## Spring 환경에서의 JPA 설정 방식

- `LocalEntityManagerFactoryBean`: 단순 실행이나 테스트 용도, `persistence.xml` 기반, 글로벌 트랜잭션 미지원
- `JNDI` 기반 설정: Jakarta EE 서버에서 제공하는 `EntityManagerFactory`를 JNDI로 획득
- `LocalContainerEntityManagerFactoryBean`: 가장 유연한 방식, DataSource, 벤더 어댑터, 로드타임 위빙, 다중 persistence unit 관리 가능
- 로드 타임 위버(Load-Time Weaving/LTW): JPA 제공자가 필요할 때 클래스 로더 수준에서 위빙 적용
- 다중 Persistence Unit: `PersistenceUnitManager`, `DefaultPersistenceUnitManager`, `PersistenceUnitPostProcessor`로 제어
- 비동기 부트스트래핑: `bootstrapExecutor`로 EntityManagerFactory 초기화를 백그라운드에서 실행