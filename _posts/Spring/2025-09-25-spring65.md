---
layout: post
title: View Resolution
date: 2025-09-25 13:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, DispatcherServlet]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 목적과 기본 개념

- Spring MVC의 뷰 처리 구조는 논리적 뷰 이름을 `ViewResolver`가 실제 `View` 객체로 매핑하고, 이 `View`가 데이터를 렌더링하는 방식
- 뷰 기술에 종속되지 않도록 뷰 해석과 렌더링을 분리하는 설계가 핵심

<br>

## 주요 ViewResolver 구현체 및 특징

#### `AbstractCachingViewResolver`

- 뷰 인스턴스를 캐시해서 반복 렌더링 성능을 높임
- 캐시 기능은 `cache` 속성으로 제어 가능하고 특정 뷰는 `removeFromCache(...)`로 갱신 가능

<br>

#### `UrlBasedViewResolver`

- 논리 뷰 이름을 URL로 바로 매핑하는 단순 방식
- 이름-URL 규칙이 일관될 때 유용

<br>

#### `InternalResourceViewResolver`

- `UrlBasedViewResolver`의 서브클래스로 JSP / 서블릿 내부 리소스를 지원
- `prefix`, `suffix`, `viewClass` 설정 가능

<br>

#### `FreeMakerViewResolver`

- FreeMaker 템플릿용 뷰 해석기
- `UrlBasedViewResolver` 기반으로 동작

<br>

#### `BeanNameViewResolver`

- 뷰 이름을 빈 이름으로 인식해서 해당 빈이 뷰 객체면 그걸 반환하는 방식 


<br>

## 뷰 리졸버 설정 & 동작 방식

- 여러 `ViewResolver`를 빈으로 등록할 수 있고, 필요 시 `order` 속성으로 순서를 제어
- 높은 order 값일수록 뒤에 위치
- `ViewResolver`의 `resolveViewName(...)` 은 뷰를 찾지 못할 경우 `null`을 반환할 수 있음
- JSP 같은 경우, `InternalResourceView`는 JSP 존재 여부를 `RequestDispatcher` 등을 통해 확인해야 해서, 일반적으로 리졸버 체인에서 마지막에 배치하는 것이 안전

<br>

## 리다이렉트 / 포워드 특수 뷰 이름 처리

- `redirect:` 접두사가 붙은 뷰 이름은 리다이렉트 처리로 인식되고 이 경우 `UrlBasedViewResolver`계열이 이를 처리
- `forward:` 접두사를 사용하면 내부 포워드 방식(`RequestDispatcher.forward()`)으로 처리

<br>

## Content Negotiation 기능

- `ContentNegotiatingViewResolver`는 직접 뷰를 선택하지 않고, 다른 리졸버들이 반환한 후보 뷰들을 보고, 클라이언트 요청의 미디어 타입에 부합하는 뷰를 선택
- 만약 후보 중 부합하는 뷰가 없을 경우 `defaultViews`로 지정한 뷰 리스트가 사용

<br>

## MVC 설정과의 통합

- `WebMvcCongigurer`나 MVC 구성 API에서 뷰 리졸버 등록을 간단히 할 수 있음
- 예: JSON 응답과 JSP를 함께 지원하려면 `enableContentNegotiation(...)` + `jsp()` 등을 설정하는 방식이 있음

<br>

## 핵심 요약

> Spring MVC에서 뷰는 논리적 이름으로 반환되고, `ViewResolver`가 이 이름을 실제 `View` 객체로 매핑하며, 여러 리졸버를 조합하거나 미디어 타입에 따라 적절한 뷰를 선택하는 기능도 제공

- `UrlBasedViewResolver`: 논리적 뷰 이름을 URL 패턴 기반으로 직접 해석
- `InternalResourceViewResolver`: JSP/서블릿 내부 리소스 뷰로 변환
- `FreeMakerViewResolver`: FreeMaker 템플릿 기반 뷰로 변환
- `ContentNegotiatingViewResolver`: 요청의 미디어 타입에 따라 적절한 뷰 선택
- `BeanNameViewResolver`: 뷰 이름을 빈 이름으로 인식하여 빈으로 정의된 뷰를 반환