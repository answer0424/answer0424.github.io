---
layout: post
title: Themes
date: 2025-09-25 13:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, DispatcherServlet]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 요약

- 테마는 웹 어플리케이션의 전반적인 look-and-feel을 정의하는 정적 리소스들의 집합
- 뷰 쪽에서 테마 속성 값을 참조할 때는 JSP에서 `<spring:theme>` 태그를 사용하거나, 뷰 코드에서 `ThemeSource`를 통해 값을 얻을 수 있음
- 다만 테마 기능은 Spring 6.0부터 deprecated된다고 나와 있음 ➡️ 서버 쪽에서 특별한 지원없이 CSS 등 클라이언트 쪽 방식 사용 권장

<br>

## 테마 정의 및 리소스 구성 방식

- `ThemeSource` 인터페이스를 구현한 빈을 등록하여 테마 소스를 제공할 수 있음
- 기본 구현은 `ResourceBundleThemeSource`이고, 클래스 패스 루트의 properties 파일을 리소스로 읽도록 설정돼 있음
- 테마 파일의 예:
    ```properties
    styleSheet=/themes/cool/style.css  
    background=/themes/cool/img/coolBg.jpg  
    ```
- 지역화 별 테마 파일도 지원됨

<br>

## ThemeResolver / 테마 결정 방식

> `DispatcherServlet`은 요청 처리 시 `themeResolver`라는 이름의 빈을 찾아서 사용하고, 이 빈을 통해 어떤 테마를 사용할지 결정하거나 변경 가능하게 설계되어 있음

#### 구현체

| 구현체 | 역할 / 특징 |
|---|---|
| `FixedThemeResovler` | 항상 하나의 고정된 테마만 사용하도록 설정 |
| `SessionThemeResolver` | 사용자 세션에 테마 정보를 저장하고 요청마다 이를 참조 |
| `CookieThemeResolver` | 클라이언트 쪽 쿠키에 테마 정보를 저장하고 읽음 |

- 또한 `ThemeChangeInterceptor`라는 인터셉터가 제공되는데, 요청 파라미터 등을 감지해서 테마를 변경할 수 있도록 해줌

<br>