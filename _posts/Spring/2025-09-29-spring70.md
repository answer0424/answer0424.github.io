---
layout: post
title: Filters
date: 2025-09-29 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 주요 내용 및 일반 구성 요소

#### Servlet Filter와 Spring MVC의 관계

- `Filter`는 서블릿 스펙의 일부로, 특정 URL 패턴에 대해 요청을 가로채 처리하거나 응답을 변조할 수 있음
- Spring MVC 및 `DispatcherServlet` 실행 전 후에 `Filter` 개입해 요청을 전처리하거나 응답을 후처리 가능

<br>

#### `CharacterEncodingFilter` 예시

- 가장 흔히 사용되는 필터 중 하나가 `CharacterEncodingFilter`
- 요청 / 응답의 문자 인코딩을 설정해줘서 한글이나 다른 문자 깨짐 방지에 자주 쓰임

<br>

#### 보안 필터 / 인증 필터

- Spring Security 같은 모듈은 필터 체인을 통해 인증/인가 기능을 구현
- 요청이 DispatcherServlet에 도달하기 전에 필터에서 토큰 검사, 세션 검사등을 함

<br>

#### 필터 순서 및 배치

- `web.xml` 또는 Java Config 단계에서 필터의 순서를 정의할 수 있음
- 일반적으로 필터는 가장 먼저 실행되는 경우가 많고, 후속 필터 또는 DispatcherServlet 실행까지 영향을 줄 수 있음

<br>

#### Spring과의 통합 방식

- Spring Boot 같은 경우는 `FilterRegistrationBean` 빈을 등록해서 필터를 Spring Bean으로 관리할 수 있음
- 필터 빈을 등록할 때 `@Order` 또는 `FilterRegistrationBean#setOrder(...)`으로 순서를 제어

<br>

#### 필터 vs 인터셉터

- `Filter`는 서블릿 레벨, Spring MVC 바깥 레벨에서 동작하므로 더 일반적이고 프레임워크 독립적인 기능을 수행할 때 사용
- 반면 `HandlerInterceptor`는 Spring MVC 내부 흐름 중간에 끼어들 수 있는 스프링 레벨 개념

<br>

## 요약

- Spring MVC 문서의 Filters 부분은 주로 서블릿 필터의 개념, 설정, 활용과 필터와 Spring MVC의 관계를 다룸
- 필터는 요청/응답 흐름 전반에 개입 가능하고, 보통 문자 인코딩 처리, 보안/인증, 로깅, 공토 전처리/후처리 기능 등을 구현하는 데 사용
- Spring 내부 구성도 같이 설명될 가능성이 높음