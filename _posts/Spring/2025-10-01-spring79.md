---
layout: post
title: RequestHeader
date: 2025-10-01 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, Controller, Handler Method]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요 및 목적

- `@RequestHeader` 어노테이션은 HTTP 요청 헤더의 값을 컨트롤러 메서드의 파라미터로 바인딩할 떄 사용
- 예를 들어, 클라이언트 요청 헤더에 담긴 `Accept-Encoding`, `Keep-Alive` 등을 파라미터로 받을 수 있음
- 메서드 파라미터의 타입이 `String`이 아니면, Spring이 타입 변환을 자동으로 수행

<br>

## 단일 헤더 바인딩


```java
@GetMapping("/demo")
public void handle(
    @RequestHeader("Accept-Encoding") String encoding,
    @RequestHeader("Keep-Alive") long keepAlive) {
    // ...
}
```

- 위 예제처럼 `@RequestHeader("헤더명")`을 사용하여 해당 헤더의 값을 직접 바인딩할 수 있음
- 만약 헤더가 없는 겨우 기본 동작은 예외 발생(400)

<br>

## 모든 헤더를 Map/HttpHeaders/MultiValueMap으로 받기

- `Map<String, String>`, `MultiValueMap<String, String>` 또는 `HttpHeaders` 타입의 파라미터에 `@RequestHeader`를 적용하면, 모든 헤더들이 해당 맵에 담김

```java
@GetMapping("/demo")
public void handle(@RequestHeader Map<String, String> headers) {
    // headers.get("Accept-Encoding"), etc.
}
```

<br>

## 컬렉션 / 배열 및 복수 값 헤더 지원

- 헤더가 쉼표로 구분된 여러 값을 담고 있다면, `String[]` 또는 `List<String>` 타입으로 받을 수도 있음 
- 즉, `@RequestHeader("Accept")`와 같이 선언하면 `String`, `String[]`, `List<String>` 등 다양한 타입으로 바인딩 가능

<br>

## 속성 및 옵션

| 속성 | 기본값 | 설명 |
|-|-|-|
| `name`, `value` | 없음 | 바인딩할 HTTP 헤더의 이름을 지정 |
| `required` | `true` | 해당 헤더가 반드시 존재해야 함 `false`로 설정하면 헤더가 없어도 예외가 발생하지 않음
| `defaultValue` | 없음 | 해당 헤더가 없을 경우 사용할 기본값을 지정 기본값이 지정되면 `required=true` 효과도 포함 |

<br>

```java
@GetMapping("/demo")
public void handle(
    @RequestHeader(name = "X-My-Header", required = false, defaultValue = "defaultVal") String h) {
    // 헤더가 없으면 "defaultVal"이 사용됨
}
```

<br>

## 참고 및 주의사항

- 헤더 이름은 대소문자를 구분하지 않지만, 통상적으로 HTTP 헤더 이름 관례에 맞추어 작성하는 것이 좋음
- 바인딜할 파라미터의 타입이 `String` 이외의 타입이면 Spring이 내부적으로 타입 변환을 수행
- `defaultValue`를 지정하면 헤더가 없거나 빈 문자열인 겨우에도 기본값이 사용되며, `required=false`와 같으 ㄴ효과를 가짐
- 동일한 헤더 이름이 여러 번 존재할 수 있는 경우 `MultiValueMap` 또는 `List<String>` 타입으로 바인딩하는 것이 유용

[react](https://answer0424.github.io/react_playground)