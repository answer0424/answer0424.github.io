---
layout: post
title: redirect Attiribute
date: 2025-10-01 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, Annotated Controller, Handler Method]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 핵심

- 기본적으로 `Model`에 담기 속성들은 리다이렉트 URL의 URI 템플릿 변수로 노출될 수 있음
- `Model`에 담긴 primitive 타입 또는 primitive 타입의 배열/컬렉션 같은 값들은 자동으로 쿼리 파라미터 형태로 URL에 붙을 수 있음
- 하지만 화면 렌더링을 위한 추가적인 속성들이 Model에 담겨 있을 수도 있어서, 이 모든 속성이 URL에 노출되는 건 바람직하지 않을 수 있음
-  그래서 이 경우, 컨트롤러 메서드에서 `RedirectAttributes` 타입의 인자를 선언하고, 이 객체를 활용해서 리다이렉트 대상에게 전달할 정확한 속서들만 추가할 수 있음
-  `ignoreDefaultModelOnRedirect` 라는 플래그가 있어서, 리디렉트 시 기본 Model의 내용을 아예 무시하도록 설정할 수 있음
-  또한, URI 템플릿 변수는 자동으로 확장되기 때문에 리다이렉트 URL 경로의 `{..}` 변수는 명시적으로 추가하지 않아도 사용 가능 
-  또 한 가지 중요한 점은 Flash Attribute 기능인데, 이 방식은 URL에 값이 노출되지 않게 HTTP 세션에 데이터를 잠시 저장해서 리디렉트 이후에 남겨두는 방법

<br>

## 예제 코드

```java
@PostMapping("/submit/{id}")
public String handleSubmit(@PathVariable String id,
                           RedirectAttributes redirectAttrs) {
    // 작업 수행
    redirectAttrs.addAttribute("id", id);      // URI 템플릿 변수로 사용될 속성
    redirectAttrs.addAttribute("status", "ok"); // 쿼리 파라미터로 추가될 속성
    redirectAttrs.addFlashAttribute("message", "등록이 완료되었습니다."); 
    // flash attribute는 URL에 노출되지 않음

    return "redirect:/result/{id}";
}

```

- 위 코드에서 `id`는 URL 경로의 `{id}` 변수로 매핑됨
- `status=ok`는 쿼리 파라미터로 URL 뒤에 `?status=ok` 형태로 붙음
- `message`는 Flash Attribute로 리다이렉트 후의 컨트롤러에서 `@ModelAttribute` 등을 통해 받아 사용할 수 있음

<br>

## 주의 및 팁

- `RedirectAttributes`를 사용하지 않으면, 기본적으로 `Model`의 속성들이 리다이렉트 URL에 붙을 수 있어서 보안/가독성 관점에서 위험할 수 있음
- `ignoreDefaultModelOnRedirect` 플래그 설정을 통해 기본 Model 속성을 무시하도록 설계하는 것이 좋음
- Flash Attribute는 세션을 사용하므로, 너무 많은 데이터를 저장하면 부담이 될 수 있고, 세션이 안되는 환경에서는 작동하지 않음
- URI 템플릿 변수와 쿼리 파라미터가 충돌할 수 있으므로 이름을 명확히 구분해서 사용해야 함