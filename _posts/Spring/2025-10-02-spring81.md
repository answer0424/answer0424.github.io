---
layout: post
title: Flash Attribute
date: 2025-10-01 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, Controller, Handler Method]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개념 및 용도

- Flash attributes는 한 요청 ➡️ 리다이렉트 ➡️ 다름 요청 흐름 사이에 데이터를 잠시 전달하는 방법
- 보통 Post-Redirect-Get (PRG) 패턴에서 많이 사용
- 플래시 속성은 리다이렉트 이전 요청에서 저장되고 리다이렉트한 후 요청에서 사용된 뒤 바로 제거됨

<br>

## 핵심 추상 및 동작 구조

- `FlashMap`: 플래스 속성 데이터를 내부에 보관하는 컨테이너 역할
- `FlashMapManager: `FlashMap`을 저장하고 꺼내며 관리하는 책임
- Spring MVC 에서는 별도의 설정 없이도 플래시 속성 기능이 항상 활성화 되어 있음
- 단 사용하지 않는다면 HTTP 세션이 생성되지는 않음
- 요청 시점에는 두 개의 `FlashMap` 인스턴스가 존재
  - 입력용 FlashMap: 이전 요청에서 전달된 플래스 속성이 저장된 것
  - 출력용 FlashMap: 현재 요청에서 리다이렉트 후 전달할 플래스 속성 저장용
- 이 `FlashMap` 인스턴스들은 `RequestContextUtils` 클래스를 통해 어디서든 접근 가능

<br>

## 컨트롤러에서의 사용 방식

- 컨트롤러 메서드에서는 `RedirectAttributes` 인자를 사용해 플래시 속성을 추가할 수 있음
- 이 속성은 자동으로 출력용 `FlashMap`에 저장
- 리다이렉트 이후의 요청에서는 입력용 `FlashMap`에 있는 속성들이 자동으로 `Model`에 추가돼서 컨트롤러에서 바로 접근 가능