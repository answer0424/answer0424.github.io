---
layout: post
title: HttpEntity
date: 2025-10-10 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, Controller, Handler Method]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- `HttpEntity<T>`는 요청 또는 응답의 본문과 헤더를 함께 다룰 수 있게 해주는 컨테이너 객체
- `@RequestBody`가 단순히 요청 본문을 java 객체로 바인딩하는 반명 `HttpEntity`는 본문 + 헤더 정보를 모두 캡슐화할 수 있음
- 즉, `HttpEntity`는 내부적으로 `@RequestBody`와 유사한 변환 기능을 제공하면서 요청 헤더 ➡️ 바디 포함 정보에 접근할 수 있게 해줌

> `HttpEntity` is more or less identical to using `@RequestBody` but is based on a container object that exposes request headers and body

<br>

## 기본 사용 예제 코드

```java
@RestController
public class AccountController {
    @PostMapping("/accounts")
    public void handle(HttpEntity<Account> entity) {
        // 요청 헤더 조회
        HttpHeaders headers = entity.getHeaders();

        // 요청 본문 조회
        Account account = entity.getBody();

        // 예: 헤더 또는 본문 내용 활용
        System.out.println("Headers: " + headers);
        System.out.println("Account: " + account);
    }
}
```

## 특징 & 장점

| 기능 | 설명 |
|---|---|
| 요청 헤더 접근 | `entity.getHeaders()` 형태로 요청 헤더 정보를 조회 가능 |
| 본문 접근 및 변환 | `entity.getBody()`를 통해 본문 객체를 얻을 수 있고, 내부적으로 메시지 컨버터가 작동 |
| 단순 바인딩 대체 가능 | `@RequestBody` 대신 사용 가능 |
| 응답과 결합 가능 | `ResponseEntity<T>`와 같이 응답 본문 + 헤더를 함께 조작하는 방식과 유사하게 사용 가능

<br>

## 주의사항 및 참고점

- `HttpEntity<T>`는 요청 본문이 없는 경우에도 빈 본문 또는 `null` 바디를 나타낼 수 있음
- 본문을 바인딩하는 데 필요한 적절한 `HttpMessageConverter`가 설정되어 있어야 함
- 응답을 생성하고 싶을 경우, `void` 반환 대신 `ResponseEntity<T>`를 사용하여 응답 본문 + 응답 헤더까지 제어할 수 있음