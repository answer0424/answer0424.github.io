---
layout: post
title: URI Links
date: 2025-10-14 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## `UriComponentsBuilder` / `UriComponents`

#### 역할 및 기본 사용

- `UriComponentsBuilder`는 URI 템플릿 + 쿼리 파라미터 등을 조합하여 URI를 동적으로 생성할 수 있게 해주는 헬퍼 클래스
- `UriComponents`는 빌드된 URI의 구성요소를 감고 있으며, 변수 확장과 인코딩 기능을 제공

<br>

#### 예제 1: 단계별 URI 빌딩

```java
UriComponents uriComponents = UriComponentsBuilder
    .fromUriString("http://example.com/hotels/{hotel}")
    .queryParam("q", "{q}")
    .encode()
    .build();

URI uri = uriComponents.expand("Westin", "123").toUri();
```

- `fromUriString()`에서 기본 템플릿 URI를 지정
- `queryParam("q", "{q}")`로 쿼리 파라미터 템플릿 추가
- `.encode()`를 통해 URI 템플릿 및 변수에 대한 인코딩 요청
- `.build()`를 통해 `UriComponents` 객체 생성
- `.expand(...)`을 통해 구체적인 변수 값을 적용
- `.toUri()`로 `java.net.URI` 객체 획득

<br>

#### 예제 2: `buildAndExpand` / `build(...)` 단축 방식

```java
URI uri = UriComponentsBuilder
        .fromUriString("https://example.com/hotels/{hotel}")
        .queryParam("q", "{q}")
        .encode()
        .buildAndExpand("Westin", "123")
        .toUri();
```

```java
URI uri = UriComponentsBuilder
        .fromUriString("https://example.com/hotels/{hotel}?q={q}")
        .build("Westin", "123");
```

<br>