---
layout: post
title: Asynchronous Requests
date: 2025-10-14 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- Spring MVC는 Servlet 비동기 요청 처리를 광범위하게 통합해서 지원함
- 컨트롤러 메서드에서 반환 가능 유형: `DeferredResult`, `Callable`, `WebAsyncTask`를 사용하여 비동기 응답이 가능함
- 또한 여러 개의 비동기 값을 스트리밍 방식으로 응답할 때 `ResponseBodyEmitter`, `SseEmitter`, `StreamingResponseBody` 등을 사용 가능함
- Reactive 클라이언트를 사용하거나 리액티브 타입을 반환하는 경우에도 대응됨

<br>

## 주요 비동기 반환 타입과 사용법

#### `DeferredResult`

- 컨트롤러에서 `DeferredResult<T>`를 반환하면, 결과를 바로 반환하지 않고 나중에 어떤 다른 스레드나 이벤트에서 `setResult(...)`를 호출해서 응답을 채울 수 있음

```java
@GetMapping("/quotes")
@ResponseBody
public DeferredResult<String> quotes() {
    DeferredResult<String> result = new DeferredResult<>();
    // 비동기 작업 수행, 또는 이벤트에 응답 대기
    // ex: 다른 스레드에서 나중에 결과를 세팅
    return deferredResult;
}

// 다른 스레드에서:
result.setResult("some result");
```

<br>