---
layout: post
title: Thymeleaf
date: 2025-10-15 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, View Technologies]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---


## 개요

- Thymeleaf는 서버 사이드 템플릿 엔진으로, HTML 기반의 자연 템플릿 개념을 강조함
- 즉, 템플릿을 브라우저에서 직접 열어봐도 디자인 형태가 유지될 수 있게 한다는 의미
- Spring MVC와의 통합은 Thymeleaf 프로젝트 측에서 지원하며, Spring MVC 어플리케이션에서 JSP를 대체할 수 있는 뷰 기술로 사용 가능
- 통합을 위해 몇 개의 빈들을 설정해야 함
  - `ServletContextTemplateResolver`
  - `SpringTemplateEngine`
  - `ThymeleafViewResolver`

<br>

## 설정 방식

```java
@Configuration
@EnableWebMvc
@ComponentScan("com.example")
public class WebConfig implements WebMvcConfigurer {
    
    @Bean
    public ServletContextTemplateResolver templateResolver(ServletContext servletContext) {
        ServletContextTemplateResolver resolver = new ServletContextTemplateResolver(servletContext);
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".html");
        resolver.setTemplateMode("TemplateMode.HTML");
        resolver.setCacheable(true);
        return resolver;
    }

    @Bean
    public SpringTemplateEngine templateEngine(ITemplateResolver resolver) {
        SpringTemplateEngine engine = new SpringTemplateEngine();
        engine.setTemplateResolver(resolver);
        // 추가적인 Dialect 설정 가능
        return engine;
    }

    @Bean
    public ThymeleafViewResolver viewResolver(SpringTemplateEngine engine) {
        ThymeleafViewResolver vr = new ThymeleafViewResolver();
        vr.setTemplateEngine(engine);
        vr.setCharacterEncoding("UTF-8");
        return vr;
    }
}
```

- `templateResolver`: 템플릿 파일 위치, 확장자, 모드, 캐싱 여부 등을 설정
- `templateEngine`: 위의 resolver를 연결하고, 필요시 자체 dialect 또는 추가 설정
- `viewResolver`: 컨트롤러가 반환한 뷰 이름과 템플릿을 연결하고 렌더링할 뷰를 결정

<br>

## Thymeleaf + Spring 특성 및 기능들

| 기능 | 설명 |
|------|------|
| Spring EL 사용 | Thymeleaf의 표현식 언어를 Spring EL 기반으로 사용 가능 |
| 폼 바인딩 & 검증 통합 | `th:field`, `th:errorclass`, `th:errors` 등의 속성으로 Spring MVC의 폼 바인딩 및 검증 결과를 템플릿에서 쉽게 반영 가능 |
| 메시지 국제화 | Spring의 `MessageSource`를 통한 국제화 메시지 표현을 템플릿에서 사용할 수 있음 |
| URL 링크 표현 | Thymleaf 내에서 컨트롤러 메서드 기반 URL 표현 기능 제공 |

<br>

## 예시

```java
@Controller
public class HomeController {

    @GetMapping("/hello")
    public String hello(Model model) {
        model.addAttribute("name", "Alice");
        return "greeting";  // templates/greeting.html 템플릿이 렌더링됨
    }
}
```

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Greeting Page</title>
</head>
<body>
  <h1 th:text="'Hello, ' + ${name} + '!'">Hello, Guest!</h1>
</body>
</html>
```

- 컨트롤러가 `model.addAttribute("name", "Alice")`로 데이터를 넣고, `return "greeting"`으로 뷰 이름을 반환
- Thymeleaf가 greeting.html 템플릿을 찾아 렌더링하면서 `${name}` 표현식을 `Alice`로 치환
- 결과 HTML이 클라이언트로 전송