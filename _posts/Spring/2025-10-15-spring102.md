---
layout: post
title: Groovy Markup
date: 2025-10-15 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, View Technologies]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---


## 개요

- Spring MVC는 Groovy Markup Template Engine과의 통합을 기본으로 지원
- 이 템플릿 엔진은 XML/XHTML/HTML5 등 마크업 기반 콘텐프 생성에 특화되어 있으며, 일반 텍스트 기반 콘텐츠 생성에도 사용할 수 있음

<br>

## 설정 방법

#### Java 설정 예

```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void configureViewResolvers(ViewResolverRegistry registry) {
        registry.groovy();
    }

    @Bean
    public GroovyMarkupConfigurer groovyMarkupConfigurer() {
        GroovyMarkupConfigurer configurer = new GroovyMarkupConfigurer();
        configurer.setResourceLoaderPath("/WEB-INF/");
        return configurer;
    }
}
```

- `registry.groovy()` 호출을 통해 Groovy Markup 뷰 리졸버를 활성화함
- `GroovyMarkupConfigurer` 빈을 통해 템플리 리소스 로더 경로 등을 지정

#### XML 설정 예

```xml
<mvc:annotation-driven/>

<mvc:view-resolvers>
    <mvc:groovy/>
</mvc:view-resolvers>

<mvc:groovy-configurer resource-loader-path="/WEB-INF/"/>
```

- `<mvc:groovy/>` 태그로 Groovy Markup 뷰 리졸버를 설정
- `<mvc:groovy-configurer>` 태그로 `GroovyMarkupConfigurer` 설정을 지정할 수 있음

<br>

## 뷰 템플릿 예시

```groovy
yieldUnescaped '<!DOCTYPE html>'
html(lang:'en') {
    head {
        meta('http-equiv':'"Content-Type" content="text/html; charset=utf-8"')
        title('My page')
    }
    body {
        p('This is an example of HTML contents')
    }
}
```

- `yieldUnescaped`를 사용하여 DOCTYPE 같은 비표준 마크업을 그대로 출력할 수 있음
- 이후 DSL 스타일로 `html { ... }`, `head { ... }`, `body { ... }` 등의 구조를 기술할 수 있음

<br>

## 주요 클래스 및 동작

- `GroovyMarkupView` 클래스는 Spring의 `AbstractTemplateView`를 상속한 뷰 구현체로, Groovy Markup 템플릿을 렌더링함
- 이 뷰는 `MarkupTemplateEngine`을 내부적으로 사용하며, 어플리케이션 컨텍스트에 설정된 `GroovyMarkupConfigurer` 빈이 템플릿 엔진 설정을 제공할 수 있음
- 주요 메서드
    - `renderMergedTemplateModel(...)`: 모델 데이터를 템플릿과 병합하고 응답으로 출력
    - `getTemplate(...)`: 뷰 이름과 locale 등을 바탕으로 템플릿 객체를 획득
    - `checkResource(...)`: 템플릿 리소스 유효성 검사
    - `setTemplateEngine(...)`: 커스텀 `MarkupTemplateEngine` 설정 가능

<br>

## 장점 및 특성

- 마크업 기반 DSL 스타일 문법 덕분에 HTML/XML 구조를 직관적으로 표현할 수 있음
- 템플릿 엔진이 Groovy DSL을 기반으로 하므로 유연성이 높고, 복잡한 로직없이 뷰 구성 가능
- Spring MVC의 뷰 해석 및 렌더링 구조와 자연스럽게 통합되어 다른 뷰 기술과 혼합하여 사용할 수 있음