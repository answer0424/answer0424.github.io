---
layout: post
title: HTTP Caching
date: 2025-10-15 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

> HTTP 캐싱은 `Cache-Control` 응답 헤더와 조건부 요청 헤더(`Last-Modified`, `ETag`)를 활용하여 웹 어플리케이션의 성능을 향상시키는 기술
>
> 이를 통해 브라우저나 프록시 서버가 리소스를 재사용하도록 유도하여 네트워크 부하를 줄이고 응답 속도를 개선할 수 있음

<br>

## `CacheControl` 클래스

- `maxAge(long duration, TimeUnit unit)`: 최대 캐시 기간을 설정
- `noStore()`: 캐싱을 방지
- `cachePublic()`: 공용 캐시를 허용함
- `noTransform()`: 응답 변환을 방지

```java
CacheControl ccCacheOneHour = CacheControl.maxAge(1, TimeUnit.HOURS);
CacheControl ccNoCache = CacheControl.noStore();
CacheControl ccCustom = CacheControl.maxAge(10, TimeUnit.DAYS).noTransform().cachePublic();
```

<br>


## 컨트롤러에서의 캐싱 설정

```java
@GetMapping("/book/{id}")
public ResponseEntity<Book> showBook(@PathVariable Long id) {
    Book book = findBook(id);
    String version = book.getVersion();
    return ResponseEntity
        .ok()
        .cacheControl(CacheControl.maxAge(30, TimeUnit.DAYS))
        .eTag(version)
        .body(book);
}
```

- 이렇게 설정할 경우, 클라이언트가 이전에 받은 리소스와 동일한 경우 `304 Not Modified` 응답을 받을 수 있음

<br>

## 정