---
layout: post
title: Jackson
date: 2025-10-16 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, View Technologies]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- Spring MVC는 Jackson 라이브러리를 기반으로 하는 뷰 구현체를 제공하여, 모델 데이터를 JSON 또는 XML 형식으로 직렬화해서 응답할 수 있음
- 기본적으로 `MappingJackson2JsonView`와 `MappingJackson2XmlView` 두 가지 뷰 클래스를 제공하며, 각각 JSON과 XML 포맷의 응답을 생성
- 이 뷰들은 `ObjectMapper`를 내부적으로 사용하여 모델 데이터를 변환

<br>

## 주요 뷰 클래스 및 속성

#### `MappingJackson2JsonView`

- `MappingJackson2JsonView`는 응답을 JSON으로 반환하는 뷰
- 기본 동작: 모델 맵의 모든 속성을 JSON으로 직렬화하되, 스프링 프레임워크 내부 클래스 등은 제외됨

| 속성 | 설명 |
|---|---|
| `modelKeys` | 어떤 모델 속성만 JSON 직렬화할지 필터링할 속성 이름들을 지정할 수 있음 |
| `extractValueFromSingleKeyModel` | 모델 맵이 단 하나의 키만 가지고 있을 경우, 그 값만 JSON으로 직렬화하도록 허용 |
| `objectMapper` | 기본 `ObjectMapper` 대신 커스텀 `ObjectMapper` 인스턴스를 주입할 수 있음 |


<br>

#### `MappingJackson2XmlView`

- JSON 뷰와 비슷한 방식으로 XML 응답을 생성
- 내부적으로 Jackson XML 확장을 위한 `XmlMapper`를 사용
- XML 뷰 사용 시 주의할 점: 모델에 여러 엔트리가 있을 경우 명시적으로 `modelKey`를 지정해야 할 수 있음
- 또한 `XmlMapper`를 커스터마이징하려면 `objectMapper` 속성에 `XmlMapper` 구현체를 주입하면 됨

<br>

## 예제 코드


```java
@Controller
public class UserController {
    @GetMapping("/user")
    public ModelAndView getUser() {
        ModelAndView mac = new ModelAndView("jsonView");
    }
}
```

```java
@Bean
public MappingJackson2JsonView jsonView(ObjectMapper objectMapper) {
    MappingJackson2JsonView view = new MappingJackson2JsonView();
    view.setObjectMapper(objectMapper);
    view.setExtractValueFromSingleKeyModel(true);

    return view;
}
```

<br>

## 주의사항 & 팁

#### 1. 모델 키 필터링

- 모델에 여러 속성이 포함되어 있을 경우 `modelKeys`를 사용하지 않으면 모두 직렬화될 수 있으므로 필요없는 속성은 자동으로 포함되지 않도록 주의

<br>