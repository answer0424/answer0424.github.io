---
layout: post
title: MVC 구성 활성화
date: 2025-10-16 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, MVC config]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- `@EnableWebMvc` 또는 `<mvc:annotation-driven>`을 사용하면 Spring MVC의 기본 구성 요소들이 등록되지만, 때로는 이 기본 구성을 커스터 마이즈할 필요가 있음
- 즉, 기본 MVC 구성을 유지하면서 특정 부분만 덮어쓰거나 확장할 수 있게 해주는 API 집합

<br>

## 주요 커스터마이징 포인트

| 메서드 | 역할 | 비고/주의사항 |
|-|-|-|
| `configureMessageConverters(List<HttpMessageConverter<?>> converters)` | 기본 메시지 컨버터 대신 또는 함께 동작할 변환기를 직접 추가 또는 교체할 때 사용 | 이 메서드를 구현하면 기본 컨버터가 제거될 수 있으므로 주의해야 함 |
| `extendMessageConverters(List<HttpMessageConverter<?>> converters)` | 기본 메시지 컨버터 설정을 그대로 유지하면서 추가 변환기만 삽입하고 싶을 때 사용 | 보통 변환 기능을 덧붙이는 용도로 적합 |
| `addFormatters(FormatterRegistry registry)` | 커스텀 `Formatter` 또는 `Converter`를 등록하여 타입 변환 및 포맷 기능을 확장 | 날짜 포맷, 사용자 타입 변환 등에 유용 |
| `addArgumentResolvers(List<HandlerMethodArgumentResolver> resolvers)` | 컨트롤러 메서드의 인자 처리기를 추가하거나 커스터 마이즈할 때 사용 | 예: `@CurrentUser` 어노테이션을 해석하는 인자 리졸버 추가 등 |
| `addReturnValueHandlers(List<HandlerMethodReturnValueHandler> handlers)` | 컨트롤러 메서드의 반환값 처리기를 추가 또는 변경할 때 사용 | 예: 특정 반환 타입을 응답 형태로 변환하는 핸들러 구현 가능 |
| `configureHandlerExceptionResolvers(List<HandlerExceptionResolver> resolvers)` | 예외 처리기의 순서 및 기본 동작을 조정할 수 있음 | 예외 처리 전략 전체를 변경하고자 할 때 주로 사용 |
| `addInterceptors(InterceptorRegistry registry)` | 핸들러 인터셉터를 등록할 수 있음 | 로깅, 인증, 권한 검사 등 공통 기능 삽입 |
| `addCorsMappings(CorsRegistry registry)` | CORS 설정을 전역적으로 정의할 수 있음 | REST API 환경에서는 자주 사용됨 |
| `configureViewResolvers(ViewResolverRegistry registry)` | 뷰 리졸버의 우선순위 및 추가 설정을 조정할 수 있음 | Thymeleaf, FreeMarker, JSP 등 여러 뷰를 혼용할 때 유용 |
| `addResourceHandlers(ResourceHandlerregistry registry)` | 정적 리소스 위치 및 캐싱 설정을 지정함 | `resource/**` 같은 경로 매핑 등 |
| `configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer)` | 기본 서블릿 핸들러를 활성화하여 정적 리소스 처리를 위임할 수 있음 | 기본 서블릿을 사용하고자 할 때 |

<br>

## 예제

```java
@Configuration
@EnableWeMvc
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void extendMessageConverters(List<HttpMessageConverter<?>> converters) {
        MyCustomConverter myConverter = new MyCustomConverter();
        converters.add(0, myConverter); // 우선순위 가장 높게 추가
    }

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry
            .addResourceHandler("/static/**")
            .addResourceLocations("classpath:/static/")
            .setCachePeriod(3600);
    }

    @Override
    public void configureViewResolvers(ViewResolverRegistry registry) {
        registry.jsp("/WEB-INF/views/", ".jsp");
    }
}
```

- `extendMessageConverters`로 기본 JSON 변환기를 유지하면서 커스텀 변환기를 삽입
- `addResourceHandlers`로 `/static/**` 요청을 `classpath:/static/` 경로에서 제공하고, 캐시 기간을 설정
- `configureViewResolvers`로 JSP 뷰 리졸버 설정