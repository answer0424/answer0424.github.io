---
layout: post
title: View Resolvers
date: 2025-10-20 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, MVC config]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요 및 역할

- View Resolver는 컨트롤러가 반환한 논리 뷰 이름을 실제 뷰 구현체로 매핑해주는 컴포넌트
- 즉, 컨트롤러가 `"home"` 같은 이름을 반환하면, View Resolver가 이 이름을 실제 템플릿이나 JSP 파일의 경로로 바꿔주고 렌더링을 담당하는 뷰 클래스를 선택
- Spring MVC에서는 여러 종류의 View Resolver 구현체가 있으며, 개발자는 필요에 따라 하나만 설정할 수도 있고 여러 개를 체인 형태로 설정해 우선 순위를 정해 사용할 수 있음

<br>

## 주요 ViewResolver 종류 및 특징

| 구현체 | 설명 |
|-|-|
| `InternalResourceViewResolver` | JSP 및 서블릿 내부 자원을 이용한 뷰용으로 가장 흔히 쓰임.  `UrlBasedViewResolver`의 서브클래스로` prefix/suffix 설정을 통해 JSP 파일 위치를 지정할 수 있음 |
| `UrlBasedViewResolver` | 간단히 URL 경로 기반으로 뷰 이름을 리졸빙 할 수 있게 한 기본 구현체 |
| `ContentNegotiatingViewResolver` | 요청의 `Accept` 헤더나 확장자 등을 기반으로 적절한 뷰를 선택하는 전략을 제공 |
| `BeanNameViewResolver` | 뷰 이름을 곧 빈 이름으로 간주하고 해당 이름의 `View`빈을 찾아 렌더링 하는 방식 |

<br>

## 설정 방법 및 순서 제어

#### Java 기반 설정 예

```java
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
    @Bean
    public ViewResolver internalResourceViewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        resolver.setOrder(2); // 우선순위 설정
        return resolver;
    }

    @Bean
    public ViewResolver beanNameViewResolver() {
        BeanNameViewResolver resolver = new BeanNameViewResolver();
        resolver.setOrder(1); // 더 높은 우선순위
        return resolver;
    }
}
```

#### XML 기반 설정 예

```xml
<bean class="org.springframework.web.servlet.view.BeanNameViewResolver">
    <property name="order" value="1"/>
</bean>

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/views/"/>
    <property name="suffix" value=".jsp"/>
    <property name="order" value="2"/>
</bean>
```

<br>

#### 순서(Order) 중요성

- 여러 뷰 리졸버가 있는 경우 `order` 값이 낮은 것이 먼저 호출
- 특히 `InternalResourceViewResolver` 같은 경우 가장 마지막에 위치해야 하는 경우가 많음
- 이유는 리졸버는 JSP 존재 여부를 요청할 때 `RequestDispatcher.forward()`를 수행할 수 있기 때문