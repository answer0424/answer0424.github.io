---
layout: post
title: Advanced Java Config
date: 2025-10-20 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, MVC config]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- `@EnableWebMvc` 어노테이션은 내부적으로 `DelegatingWebMvcConfiguration`을 import해서 기본적인 MVC 인프라를 자동 등록해줌
- 그러나 custom 제어가 필요할 경우, `@EnableWebMvc` 대신에 `DelegatingWebMvcConfiguration` 또는 그 상속 클래스를 직접 확장해서 사용함으로써 내부 빈을 오버라이드하거나 속성을 변경할 수 있음
- 이 방식은 기본 제공되는 설정을 그대로 쓰되 일부만 바꾸는 수준이 아니라 근본적인 인프라 빈 구성 변경이 필요한 경우에 적합

<br>

## 예시 코드

```java
@Configuration
public class WebConfiguration extends DelegatingWebMvcConfiguration {
    @Override
    @Bean
    public RequestMappingHandlerMapping requestMappingHandlerAdapter() {
        RequestMappingHandlerAdapter adapter = super.requestMappingHandlerAdapter();

        adapter.setIgnoreDefaultModelOnRedirect(true);
        return adapter;
    }

    @Override
    protected void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new MyCustomInterceptor());
    }
}
```

<br>

## 사용 이유

- 대부분의 웹 어플리케이션에서는 `@EnableWebMvc` + `WebMvcConfigurer`로 충분
- 하지만 다음과 같은 경우에는 Advanced Java Config 방식이 유리함
  - 기본으로 등록된 MVC 인프라 빈의 속서을 변경해야 할 떄
  - 기본 제공되지 않는 빈을 추가하거나 교체해야 할 때
  - 프레임워크 내부 동작을 보다 세밀하게 조정하거나 확장하고자 할 때

<br>

## 유의사항

- 어플리케이션 내에 `@EnableWebMvc`를 사용한 설정과 함께 `DelegatingWebMvcConfiguration`을 직접 확장한 클래스가 동시에 존재하면 베이스 빈이 중복 등록 될 수 있음
- 이 방식으로 구성하면 Spring Boot의 자동 구성 중 일부가 무시될 수 있으므로, Boot 환경에서는 특히 설정을 잘 검토해야 함
- 내부 빈을 직접 건드리는 것은 애플리케이션 유지보수 측면에서 위험할 수 있음