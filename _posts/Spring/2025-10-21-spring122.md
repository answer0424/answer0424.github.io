---
layout: post
title: Advanced XML Config
date: 2025-10-21 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, MVC config]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- Spring MVC 환경에서 HTTP/2 프로토콜 지원
- HTTP/2를 제대로 활용하기 위해서 서블릿 컨테이너가 Servlet 4이상을 지원해야 한다는 전제
- 프로그래밍 모델 측면에서는 어플리케이션이 특별히 해야 할 것이 없다고 명시

<br>

## 핵심 내용

- Spring MVC 어플리케이션에선 HTTP/2를 사용하기 위해 컨트롤러 코드 변경이 거의 필요 없다는 점이 강조됨
  - 즉, `@RequestMapping`, `@Controller` 등의 일반 코드가 HTTP/2 여부에 따라 달라지지 않음
- 확인해야 할 점
  1. 서블릿 컨테이너가 HTTP/2를 지원해야 함(예: Tomcat 10+, Jetty 11+ 등)
  2. 서버 구성 측면에서 HTTP/2 활성화 필요 ➡️ TLS 설정, 커넥터 설정 등이 포함될 수 있음
- `jakarta.servlet.http.PushBuilder` 인자를 컨트롤러 메서드에 넣을 수있다는 것

<br>

## 유의사항 및 팁

- HTTP/2는 서버 측 지원뿐 아니라 클라이언트 지원도 필요
- HTTP/2를 활성화하기 위해선 HTTPS/TLS 설정이 요구되는 경우가 많음
- Spring Boot 환경이라면 `server.http2.enabled=true` 같은 설정으로 비교적 쉽게 활성화할 수 있음
- `PushBuilder` 같은 고급 기능을 이용하면 리소스 푸시를 활용해 성능을 개선할 수 있지만, 남용 시 오리혀 역효과가 날 수 있으므로 적절히 설계해야 함

<br>

## HTTP/2 란

> HTTP/2는 HTTP/1.1을 대체하는 차세대 웹 통신 프로토콜로, 속도, 효율성, 병렬성을 높이기 위해 바이너리 프레이밍 구조로 설계된 프로토콜

- 기존 HTTP/1.1은 텍스트 기반 요청/응답 구조
- HTTP/2는 바이너리 기반으로 바꿔서 하나의 TCP 연결로 여러 요청을 동시에 처리(Multiplexing)가 가능하게 만든 프로토콜

<br>

## HTTP/1.1 vs HTTP/2

| 구분 | HTTP/1.1 | HTTP/2 |
|-|-|-|
| 데이터 포맷 | 텍스트 기반 | 바이너리 프레이밍 기반 |
| 요청 처리 | 한 연결당 한 요청 | 한 연결에서 여러 요청 동시 처리(Multiplexing) |
| 헤더 전송 방식 | 매 요청 마다 전체 헤더 전송 | HPACK 헤더 압축으로 중복 제거 |
| 요청 순서 제어 | 순서 보장 | 요청 우선 순위 제어 가능 HOL 문제 완화 |
| 서버 ➡️ 클라이언트 푸시 | 지원 x | 서버 푸시 지원(서버가 미리 리소스를 예상하고 푸시) |
| 연결 재사용 | Keep-Alive로 제한적 재사용 | 하나의 TCP 연결로 다수의 요청 처리 |
| 암호화(TLS) | 선택적 | 대부분 TLS 사용 권장 |