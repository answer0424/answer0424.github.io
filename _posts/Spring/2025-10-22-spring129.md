---
layout: post
title: Enable STOMP
date: 2025-10-22 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, WebSockets, STOMP]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 활성화 절차 및 설정

#### 의존성 준비

- STOMP over WebSocket 기능을 사용하기 위해서는 `spring-websocket` 및 `spring-messaging` 모듈이 클래스 패스에 있어야 함

<br>


#### 구성 어노테이션 및 설정 클래스

- Java 설정 기준으로는, 설정 클래스에 `@Configuration`과 `@EnableWebSocketMessageBroker` 어노테이션이 붙어야 함
- 이 클래스는 `WebSocketMessageBrokerConfigurer` 인터페이스를 구현하여 다양한 STOMP-엔드포인트와 메시지 브로커 설정을 오버라이드 할 수 있음

<br>

#### STOMP 엔드포인트 등록

- `registerStompEndpoints(StompEndpointRegistry registry)` 메서드에서 클라이언트가 WebSocket으로 연결할 URL을 등록함

```java
registry.addEndpoint("/portfolio");
```

- 위 예시는 `/portfolio`라는 HTTP URL이 클라이언트가 WebSocket 핸드셰이크를 요청하는 엔드포인트임을 나타냄
- 최소한 기본 WebSocket 엔드포인트를 등록하며, 필요시 `withSockJS()` 옵션을 붙여 폴백 지원도 설정할 수 있음

<br>