---
layout: post
title: Dots as Seperators
date: 2025-10-23 09:00:00 +09:00
categories: [Spring, Servlet Stack, Web MVC, WebSockets, STOMP]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---


## 개요

- 기본적으로 STOMP 목적지 매핑은 슬래시(`/`)를 경로 구분자로 사용
- 그러나 메시징 환경에서는 흔히 `.`을 사용해서 `topic.chat.room` 같은 형태로 목적지를 표현하는 것이 익숙할 수 있음
- 이 경우 Spring에서는 `AntPathMatcher` 기반의 경로 매칭 규칙을 바꿔서 점을 구분자로 사용할 수 있도록 지원

<br>

## 설정 방법

```java
@Configuration
@EnableWebSocketMessageBroker
public class WebSocketConfiguration implements WebSocketMessageBrokerConfigurer {

    @Override
    public void configureMessageBroker(MessageBrokerRegistry registry) {
        registry.setPathMatcher(new AntPathMatcher("."));
        registry.enableStompBrokerRelay("/queue", "/topic");
        registry.setApplicationDestinationPrefixes("/app");
    }
}
```

<br>

```xml
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:websocket="http://www.springframework.org/schema/websocket"
       …>
    <websocket:message-broker application-destination-prefix="/app" path-matcher="pathMatcher">
        <websocket:stomp-endpoint path="/stomp"/>
        <websocket:stomp-broker-relay prefix="/topic,/queue"/>
    </websocket:message-broker>

    <bean id="pathMatcher" class="org.springframework.util.AntPathMatcher">
        <constructor-arg index="0" value="."/>
    </bean>
</beans>
```


<br>