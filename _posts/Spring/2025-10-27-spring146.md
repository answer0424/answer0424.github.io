---
layout: post
title: Reactive Core
date: 2025-10-27 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- Spring Framework가 제공하는 리액티브 웹 스택은 `spring-web` 모듈을 통해 기초적인 리액티브 웹 어플리케이션 기능을 제공
- 즉, HTTP 요청/응답 ➡️ 리액티브 스트림 처리 ➡️ 논블로킹 I/O까지의 핵심 기반 계층이 이 장에서 다뤄짐
- 이 기반 위에 더 상위 레벨이 구축

<br>

## 핵심 구성 요소

| 계층 | 설명 | 참고 |
|-|-|-|
| `HttpHandler` | HTTP 요청을 처리하는 가장 낮은 수준의 계약. 단일 메서드로 요청을 받고 응답을 처리할 수 있게 설계됨 | 비동기/논블로킹 처리 가능 |
| `WebHandler` | `HttpHandler` 위에 위치한 좀 더 일반적인 웹 요청 처리 API. 어노테이션 방식, 함수형 방식 등의 핸들러가 이 위에 구현됨 | 어플리케이션 코드가 이 계층을 직접 사용하기도 함 |
| 코덱 | 요청/응답 바디 직렬화·역직렬화, 다양한 데이터 형식 지원(예: JSON, XML, 스트림) 등을 처리하는 계층 | 스트림 처리, SSE, WebSocket 연동 등의 기반 |
| 클라이언트 측 | 서버가 아닌 클라이언트에서도 리액티브 스트림 기반 논블로킹 I/O가 가능하도록 지원 | 외부 API, 마이크로 서비스 내부 호출 등에 사용 |

<br>

## 런타임/서버 지원

- `spring-web` 모듈은 여러 서버 런타임과 호환됨
- 따라서 꼭 Netty만 사용하는 것은 아니며, 기존 서블릿 기반 환경에서도 리액티브 모델을 부분적으로 적용할 수 있음

<br>

## 리액티브 스택의 특징 및 설계 고려사항

- 논블로킹 I/O: 요청 처리 동안 스레드가 다른 작업을 수행할 수 있으며, 블로킹 호출을 피해야 성능 이점이 극대화
- 백프레셔: 리액티브 스트림 사양의 핵심 개념으로, 데이터 생상자가 소비자의 처리 속도를 초과하지 않도록 제어하는 메커니즘을 지원
- 어노테이션 + 함수형 모델 병행 가능: 리액티브 코어 위에 어노테이션 기반 컨트롤러와 함수형 엔드포인트 모두 구현 가능
- 완전 리액티브가 아닌 경우 주의: 예컨대, 리액티브 스택 위에 블로킹 JDBC/JPA를 그대로 사용하면 스레드 풀 갇힘 등 성능 저하 위험이 있음