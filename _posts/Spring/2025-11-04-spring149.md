---
layout: post
title: Mapping Requests
date: 2025-11-04 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux, Annotated Controllers]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- `@RequestMapping` 어노테이션은 Spring WebFlux 컨트롤러에서 요청 URL, HTTP 메서드, 파라미터, 헤더, 미디어 타입 등을 기반으로 핸들러 메서드를 매핑하는 데 사용
- 클래스 레벨과 메서드 레벨 모두에 적용 가능하며, 클래스 레벨은 공통 경로를 지정하는 데 적합하고, 메서드 레벨은 보다 세부적인 엔드포인트를 정의하는 데 적합
- `@GetMapping`, `@PostMapping`, `@PutMapping`, `@DeleteMapping`, `@PatchMapping` 등은 `@RequestMapping`의 축약형으로 제공

<br>

## 주요 속성 및 사용법

#### URL 패턴 및 변수

- `@RequestMapping("/person")` + `@GetMapping("/{id}")` 형태로 URL 패턴과 경로 변수를 지정 가능

```java
@RestController
@RequestMapping("/persons")
class PersonController {
    @GetMapping("/{id}")
    public Person getPerson(@PathVariable String id) {
        // id에 해당하는 Person 반환
    }

    @PostMapping
    @ResponseStatus(HttpStatus.CREATED)
    public void add(@RequestBody Person person) {
        // 새로운 Person 추가
    }
}
```

- 와일드카드 패턴(`*`, `**`) 및 경로 변수 (`{var}`, `{var:regex}`,  `{*var}`) 사용을 지원
- 참고: WebFlux에서는 suffix 패턴 매핑을 기본 지원하지 않으며, 대신 쿼리 파라미터 기반 내용 협상을 권장

#### 미디어 타입, 파라미터, 헤더 조건

- `consumes` 속성: 요청의 `Content-Type` 헤더에 기반해 매핑 가능

```java
@PostMapping(path = "/pets", consumes = "application/json")
public void addPet(@RequestBody Pet pet) { … }
```

<br>

- `produces` 속성: 응답에 `Accept` 헤더에 기반해 매핑 가능

```java
@GetMapping(path = "/pets/{id}", produces = "application/json")
public Pet getPet(@PathVariable String petId) { … }
```

<br>

- `params` 속성: 쿼리 파라미터 조건 

```java
@GetMapping(path = "/pets/{petId}", params = "myParam=myValue")
public Pet getPet(@PathVariable String petId) { … }
```

<br>

- `headers` 속성: 특정 헤더 조건

```java