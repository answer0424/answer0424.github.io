---
layout: post
title: Return Values
date: 2025-11-07 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux, Annotated Controllers, Handler Methods]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---


## 개요

- WebFlux의 어노테이션 기반 컨트롤러에서 메서드가 반환할 수 있는 다양한 타입과 그 동작 방식을 설명
- 리액티브 타입을 포함해 일반 객체, `ResponseEntity`, `HttpEntity` 등도 모두 지원됨
- 특히 `Flux<T>` 등 스트림형 반환값의 경우 요소를 하나씩 스트리밍 해서 전송하고, 가능하면 메모리에 한꺼번에 버퍼하지 않는 방식이 기본

<br>

## 지원되는 주요 반환 타입 및 설명

| 반환 타입 | 설명 |
|-|-|
| 일반 객체 / `@ResponseBody` 적용 | 객체가 HTTP 바디로 직렬화되어 응답됨 |
| `HttpEntity<B>` / `ResponseEntity<B>` | HTTP 헤더 + 바디 + 상태 코드를 포함한 응답을 정의할 수 있음 |
| `HttpHHeaders` | HTTP 헤더 정보에 접근하고 수정할 수 있음 |
| `String` |  뷰 이름으로 해석되어 모델과 함께 뷰 리졸버를 통해 렌더링됨 |
| `View` | `View` 인스턴스를 직접 반환해서 뷰와 모델을 통한 렌더링이 가능 |
| `Map` / `Model` | 뷰 이름은 자동으로 결정되고, 모델 데이터만 반환하는 형태 |
| `void` / `Mono<Void>` | 응답 처리가 메서드 내부에서 이미 완료됐거나, 응답 본문이 없는 경우 등에 사용됨 |
| `Flux<ServerSentEvent<T>>` | 서버 전송 이벤트나 스트리밍 응답을 구현할 때 사용 |

<br>

## 주의사항 및 활용 팁

- `Flux<T>` 같은 때 다수의 요소를 반환해야 한다면 WebFlux는 기본적으로 요소를 버퍼링하지 않고 바로 전송하는 방식
  - 이렇게하면 메모리 사용을 효율적으로 할 수 있음
- 다만, 이런 방식에서는 요소 중간에 인코딩 오류가 발생했을 경우 적절한 오류 응답을 내보내기 어려울 수 있음
  - 문서에서는 이럴 때 `Flux<B>` 등으로 버퍼링하는 방법도 언급
- 뷰 기반 응답을 사용하는 경우, `String`이나 `Map`/`Model`등의 반환 타입을 잘 활용하면 됨
  - 반면 REST API처럼 바디만 반환하는 경우에는 `Mono<T>` 또는 `Flux<T>` 사용이 권장
- 리액티브 타입을 사용할 경우, 컨트롤러 내부에서 블로킹 호출을 피해야하고, 리액티브 흐름을 유지하는 것이 중요
- `ResponseEntity<T>` 등을 사용하면 상태코드나ㅏ 헤더를 직접 제어할 수 있어 좀 더 유연