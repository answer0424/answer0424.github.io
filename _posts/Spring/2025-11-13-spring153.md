---
layout: post
title: RequestHeader
date: 2025-11-13 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux, Annotated Controllers]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- `@RequestHeader` 어노테이션은 HTTP 요청 헤더의 값을 핸들러 메서드의 메서드 인자로 바인딩하는 데 사용
- 예를 들어, 요청에 `Accept-Encoding`이나 `Keep-Alive` 등의 헤더가 있을 때, 이를 인자로 받아서 처리할 수 있음

<br>

## 예제

```java
@GetMapping("/demo")
public void handle(
    @RequestHeader("Accept-Encoding") String encoding,
    @RequestHeader("Keep-Alive") long keepAlive) {
    // encoding: Accept-Encoding 헤더 값
    // keepAlive: Keep-Alive 헤더 값
}
```

- 위 예제는 요청 헤더 중 `Accept-Encoding`과 `Keep-Alive` 값을 각각 `String`과 `long` 타입으로 받아 처리하는 방식

<br>

#### Map 또는 전체 헤더 바인딩

- 메서드 인자로 `Map<String, String>`, `MultiValueMap<String, String>` 또는 `HttpHeaders` 타입을 사용하면 요청에 포함된 모든 헤더 이름과 값이 해당 인자에 바인딩 됨
- 또 쉼표로 구분된 문자열 헤더값을 `String[]` 또는 `List<String>` 같은 배열/컬렉션 타입 인자로 받을 수도 있음

<br>

## 주요 속성 및 동작

- `required` 속성: 기본값이 `true` 이며, 지정한 헤더가 요청에 없으면, `MissingRequestHeaderException`등이 발생할 수 있음
- `defaultValue` 속성: 헤더가 없을 경우 대체 값을 지정할 수 있으며, 이 값이 설정되면 `required=false`와 동일하게 동작
- 타입 변환: 바인딩된 헤더 문자열이 `String`외 타입이라도 스프링이 자동으로 타입 변환을 수행

<br>

## 유의사항 및 팁

- 헤더명이 요청에 반드시 존재할 것이라면 기본 `required=true` 설정이 적합하지만, 없을 가능성이 있다면 `required=false` 또는 `defaultValue`를 사용해 실패를 방지하는 것이 좋음
- 여러 값이 들어있는 헤더를 배열 또는 리스트 형태로 받고 싶다면, `@RequestHeader("Accept") List<String> accepts`와 같이 선언 가능
- 전체 헤더를 인자로 받고자 한다면 `HttpHeaders headers` 또는 `@RequestHeader MultiValueMap<String, String> headers`를 사용하면 편리
- 이 어노테이션은 Servlet 기반의 Spring Web MVC 환경 뿐아니라 리액티브 스택인 Spring WebFlux 환경에서도 지원됨