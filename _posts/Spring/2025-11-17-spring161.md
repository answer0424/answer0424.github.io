---
layout: post
title: ResponseBody
date: 2025-11-17 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux, Annotated Controllers, Handler Methods]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- `@ResponseBody` 어노테이션을 컨트롤러 메서드에 붙이면, 메서드가 반환하는 객체를 뷰 이름으로 해석하지 않고, HTTP 응답의 본문으로 직렬화하여 클라이언트에 보냄
- 내부적으로 `HttpMessageConverter`가 사용되어 반환 객체의 타입과 요청/응답 미디어 타입에 맞춰 직렬화됨
- 클래스 레벨에 붙이면 해당 컨트롤러 내 모든 메서드에 적용됨
  - 예컨대 `@RestController` 는 내부적으로 `@Controller + @ResponseBody` 조합과 동일한 효과임


<br>
<hr>

## 사용법 및 예제 코드

#### Java 예제

```java
@RestController
@RequestMapping("/accounts")
public class AccountController {

    @GetMapping("/{id}")
    @ResponseBody
    public Account getAccount(@PathVariable("id") Long id) {
        // 계정 조회 로직 …
        return accountService.findById(id);
    }
}
```

- 위 예제에서 `/accounts/{id}` 요청에 대한 응답으로 `Account` 객체가 JSON으로 직렬화되어 응답 본문으로 리턴됨

<br>

#### 미디어 타입 지정

- `@GetMapping`이나 `@RequestMapping`에 `produces` 속성을 사용하면 반환 미디어 타입을 명시할 수 있음

```java
@GetMapping(value = "/accounts/{id}", produces = MediaType.APPLICATION_JSON_VALUE)
@ResponseBody
public Account getAccuntJson(@PathVariable Long id) {
    return accountService.findById(id);
}
```

<hr>

## 특징 및 팁 

- `@ResponseBody`가 없으면 메서드는 기본적으로 뷰 이름을 반환하며, 뷰 리졸버가 결과를 렌더링함
  - 반면 `@ResponseBody` 사용 시 뷰 리졸버 대신 메시지 컨버터가 동작함
- `Resource` 타입을 반환하면 파일 콘텐프를 응답 본문으로 직접 복사할 수 있음 
  - 이때 `InputStreamResource` 등의 사용 시 스트림을 즉시 닫지 않고 지연 로드하는 것이 좋음
- 리액티브 어플리케이션에서도 `@ResponseBody` 스타일이 지원되며, `Flux<T>`나 `Mono<T>`등의 리액티브 타입을 반환해 스트리밍 응답이 가능함
- 메시지 컨버터 설정은 `WebMvcConfigurer` 등을 통해 커스터마이지할 수 있음