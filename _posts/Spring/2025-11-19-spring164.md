---
layout: post
title: Model
date: 2025-11-19 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux, Annotated Controllers]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- `@ModelAttribute` 어노테이션은 다음과 같은 용도로 사용됨
  1. `@RequestMapping` 메서드의 메서드 인자에 사용되어, 모델에서 객체를 가져오거나 새로 생성하고 요청 파라미터 바인딩을 수행할 수 있음
  2. 메서드 레벨에서 `@ModelAttribute`를 사용하면, 해당 컨트롤러 내의 모든 `@RequestMapping` 메서드가 실행되기 전에 모델을 초기화하는 역할을 하ㅏㅁ
  3. `@RequestMapping` 메서드 위에 붙여서 반환값을 모델 속성을 간주하도록 할 수도 있음

<hr>

## 사용방식

#### 실행 시점

- `ModelAttribute` 메서드는 같은 컨트롤러 클래스 내의 `@RequestMapping` 메서드보다 먼저 실행됨
- `@ControllerAdvice`에 정의된 `@ModelAttribute` 메서드는 여러 컨트롤러에 걸쳐 공통적으로 모델을 초기화할 때 사용할 수 있음

<br>

#### 메서드 시그니처의 유연성

- `@ModelAttribute` 메서드는 `@RequestMapping` 메서드에서 사용하는 대부분의 인자 유형을 지원하ㅏ지만, `@ModelAttribute` 자신, 요청 본문 관련 인자 등은 사용할 수 없음

```java
@ModelAttribute
public void populateModel(@RequestParam String number, Model model) {
    model.addAttribute(accountRepository.findAccount(number));
}
```

또는

```java
@ModelAttribute
public Account getAccount(@RequestParam String number) {
    return accountRepository.findAccount(number);
}
```

- 위 두 방식 모두 가능하며, 후자의 경우 반환값 타ㅏ입이나 메서드 이름을 기반으로 기본 이름이 지정됨

<br>

#### 모델 속성 명명 및 반환값 처리

- `@ModelAttribute` 메서드에서 명시적으로 이름을 지정하지 않으면, 반환값 타입이나 메서드 이름을 기반으로 기본 이름이 지정됨
- 이름을 직접 지정하려면, 메서드 수준 `@ModelAttribute("명칭")`을 사용하거나 `Model.addAttribute("명칭", 객체)` 방식으로 속성 추가가 가능함

```java
@GetMapping("/account/{id}")
@ModelAttribute("myAccount")
public Account handle() {
    // ...
    return account;
}
```