---
layout: post
title: InitBinder
date: 2025-11-19 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux, Annotated Controllers]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- `@InitBinder` 어노테이션은 컨트롤러 또는 컨트롤러 어드바이스 클래스 내에서 메서드에 사용할 수 있음
- 이러한 메서드는 내부에서 WebDataBinder 인스턴스를 초기화해줌
  - 이 바인더는 요청 파라미터를 모델 객체에 바인딩하거나, 문자열을 객체 속성 타입으로 변환, 또는 모델 객체 속성을 문자열로 포매팅할 때 사용됨
- 컨트롤러 수준에서는 해당 컨트롤러에만 적용되는 바인더 설정을 할 수 있고, `@ControllerAdvice`에서는 여러 컨트롤러에 걸친 공통 바인더 설정을 할 수 있음

<hr>

## 주요 기능 및 사용 방식

#### 메서드 정의

- `@InitBinder` 메서드는 일반적으로 다음과 같은 형태
  - `public void methodName(WebDataBinder binder)`
- 또한 Formatter 또는 Converter 기반의 타입 변환을 사용할 경우에도 사용 가능
  
<br>

#### 바인딩 및 변환 설정

- `WebDataBinder`를 사용하여 커스텀 에디터나 포맷터를 등록할 수 있음
  - 예: 날짜 타입을 특정 포맷으로 변환하도록 `CustomDataEditor` 등록
  - 예: `DateFormater`를 사용하여 날짜 포맷 지정

<br>

#### 보안 및 바인딩 범위 제어

- 웹 요청 시 요청 파라미터가 모델 객체의 모든 public 속성에 바인딩될 수 있는데, 이로 인해 예상치 않은 속성까지 설정될 위험이 있음
- 권장 사항
  - 전용 모델 객체를 만들어 요청에 필요한 속성만 선언하는 것이 좋음
  - 또는 constructor binding을 사용해 요청 파라미터가 생성자 인자로만 바인딩되도록 할 수 있음
  - 또 다른 방법으로는 `WebDataBinder`에 `allowedFields` 또는 `disallowedFields`를 설정하는 것인데, 허용 필드를 명시하는 방식이 더 안전함

```java
@InitBinder
void initBinder(WebDataBinder binder) {
    binder.setAllowedFields("oldEmailAddress", "newEmailAddress");
}
```

-  또한 프로퍼티 바인딩 대신 생성자 바인딩만 사용하고자 할 경우에는 `binder.setDeclarativeBinding(true)`를 성정할 수 있음

<hr>


