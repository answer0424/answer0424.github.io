---
layout: post
title: Exception
date: 2025-11-19 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux, Annotated Controllers]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- Spring MVC는 컨트롤러 내부에서 예외가 발생했을 때 이를 처리할 수 있는 메커니즘을 제공
- 이 처리 방식은 내부적으로 `ExceptionHandlerExceptionResolver` 같은 `HandlerExceptionResolver` 구현체가 동작하는 구조 위에 놓여 있음
- 또한, `@ExceptionHandler` 메서드는 개별 컨트롤러 단에서도 정의할 수 있고, 전역 적용을 위해 `@ControllerAdvice` 클래스를 정의할 수도 있음

<hr>

## `@ExceptionHandler` 메서드 사용 방식

#### 지정 예외 처리 

- `@ExceptionHandler` 어노테이션 인자로 하나 이상의 예외 클래스를 지정하면, 해당 예외 또는 그 하위 예외가 컨트롤러 핸들러 메서드 실행 중에 발생했을 때 이 메서드가 호출됨
- 인자를 지정하지 않은 경우, 메서드 매개변수에서 예외 타입을 유추해 처리 대상 예외로 삼기도 함

<br>

#### 메서드 시그니처 및 반환값

- `@ExceptionHandler` 메서드의 매개변수로는 발생한 예외 객체, `HttpServletRequest`, `HttpServletResponse`, `WebRequest` 등이 올 수 있음
- 반환 타입은 `ModelAndView`, `String`, `ResponseEntity<T>` 또는 `void` 등이 가능하며, REST API의 경우 `ResponseEntity` 형태로 JSON 응답을 반환하는 형태가 많음

<br>

#### 예외 처리 우선순위

- 컨트롤러 클래스 내에 정의된 `@ExceptionHandler`가 있다면 해당 컨트롤러에서 먼저 적용됨
- 즉, 컨트롤러 내 예외 처리기가 있을 경우, 전역 처리기가 호출되지 않을 수 있음

<hr>

## 전역 예외 처리: `@ControllerAdvice` + `@ExceptionHandler`

- `@ControllerAdvice` 어노테이션이 붙은 클래스는 여러 컨트롤러에 걸쳐 공통 예외 처리를 할 수 있는 장소로 사용됨
- 이 클래스 내에 `@ExceptionHandler` 메서드를 정의하면, 해당 예외가 발생한 컨트롤러가 어디이든 간에 처리될 수 있음
- 전역 처리기를 설계할 때 주의할 점: 여러 `@ControllerAdvice` 빈이 있을 경우 실행 순서가 명시적이지 않으며, 예외 처리 경로가 겹칠 경우 어느 핸들러가 동작할지 예측해야 함