---
layout: post
title: Functional Endpoints
date: 2025-11-20 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- Spring MVC에는 기존의 어노테이션 기반 모델 외에 함수형 프로그래밍 모델, 즉 WebMvc.fn 이라는 기능이 포함되어 있음
- 이 모델에서는 HTTP 요청을 처리할 때 함수와 라우터 함수라는 개념이 중심임
  - 즉, 요청 ➡️ 라우터 함수 ➡️ 핸들러 함수 ➡️ 응답 흐름으로 구성됨
- 기본적으로 이 모델은 동일한 `DispatcherServlet` 기반 위에서 동작하며, 어노테이션 기반 방식과 같이 동시 사용이 가능

<hr>

## 주요 개념

#### `HandlerFunction`

- `HandlerFunction`은 요청을 처리하는 함수형 단위로, `ServerRequest` 객체를 받아 `ServerResponse` 객체를 반환하는 형태
  - 즉, 어노테이션 기반 모델의 `@RequestMapping` 메서드 본문과 유사한 역할을 함
- `ServerRequest`와 `ServerResponse`는 변경 불가능 계약으로 설계되어 있으며, JDK8 이후 람다/메서드 참조 스타일과 잘 어울리도록 되어 있음

<br>

#### `RouterFunction`

- `RouterFunction`은 들어온 `ServerRequest`를 보고 적절한 `HandlerFunction`을 결정하는 함수형 라우터임
  - 입력: `ServerRequest` ➡️ 출력: `Optional<HandlerFunction>` 형태임
- 보통 `RouterFunctions.route()` 빌더를 통해 라우터를 구성하며, HTTP 메서드, 경로, 미디어 타입 등을 라우팅 규칙으로 설정할 수 있음
- 라우터 함수는 선언된 순서대로 평가되며, 먼저 매치되는 규칙이 처리됨