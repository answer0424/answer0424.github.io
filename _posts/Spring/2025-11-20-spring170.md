---
layout: post
title: URL Links
date: 2025-11-20 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- Spring MVC에서는 URI(Uniform Resource Identifier)를 템플릿 방식으로 만들고, 변수 치환과 인코딩을 지원하는 API를 제공
- 주요 클래스
  - `org.springframework.web.util.UriComponentsBuilder`
  - `org.springframework.web.util.UriComponents`
  - `org.springframework.web.util.DefaultUriBuilderFactory` (및 `UriBuilderFactory`/`UriBuilder`) 
- 이를 통해 요청 기반 URL을 재활용 하거나 외부 요청을 위한 URI를 동적으로 생성할 수 있음 

<hr>

## 주요 개념 및 사용 방식

#### URI 템플릿 + 변수 치환

```java
UriComponents uriComponents = UriComponentsBuilder
    .fromUriString("https://example.com/hotels/{hotel}")
    .queryParam("q", "{q}")
    .encode()
    .build();
URI uri = uriComponents.expand("Westin", "123").toUri();
```

- 위 예제에서 `{hotel}` 및 `{q}`는 템플릿 변수이며, `expand()` 호출 시 실제 값으로 치환됨
- 또한 `buildAndExpand()` 메서드를 바로 사용할 수도 있음
- 템플릿 문자열 안에 쿼리 파라미터까지 포함할 수 있음

```java
URI uri = UriComponentsBuilder
    .fromUriString("https://example.com/hotels/{hotel}?q={q}")
    .build("Westin", "123");
```


<br>

#### 인코딩 처리

- `encode()` 메서드를 호출하면 URI 템플릿 치환 후에 적절한 인코딩이 적용됨
- 이는 변수 값이 특수 문자를 포함하는 경우 중요
- `UriComponentsBuilder` ➡️ `UriComponents` 객체는 불변하며, `expand()`나 `encode()` 호출 시 새 인스턴스를 반환함

<br>
