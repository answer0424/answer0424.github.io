---
layout: post
title: Thymeleaf
date: 2025-11-24 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebFlux]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개념 및 장점

- Thymeleaf는 서버사이드 Java 템플릿 엔진으로, HTML 파일을 자연스러운 템플릿으로 유지할 수 있음
- 디자이너도 브라우저에서 템플릿을 두 번 클릭해서 미리보기 가능 ➡️ 개발과 디자인 분업에 유리함
- JSP 대체로 적합하며, HTML 5 등에서 강력한 기능 제공

<hr>

## Spring MVC와의 통합 설정 컴포넌트

- `ServletContextTemplateResolver`: 템플릿 파일 등의 위치, 접미사 등을 설정하는 리졸버
- `SpringTemplateEngine`: Thymeleaf 엔진으로, 템플릿 리졸버를 연결하고 Spring의 기능과 통합
- `ThymeleafViewResolver`: Spring MVC의 `ViewResolver` 역할을 하며, 컨트롤러가 리턴하는 뷰 이름을 실제 Thymeleaf 템플릿으로 렌더링

<hr>

## 설정 예시


```java
@Configuration
@EnableWebMvc
@ComponenetScan
public class WebConfig {
    @Autowired
    ApplicationContext applicationContext;

    @Bean
    public SpringResourceTemplateResolver templateResolver() {
        SpringResourceTemplateResolver resolver = new SpringResourceTemplateResolver();
        resolver.setApplicationContext(applicationContext);
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".html");
        resolver.setTemplateMode("HTML");
        return resolver;
    }

    @Bean
    public SpringTemplateEngine templateEngine() {
        ThymeleafTemplateEngine engine = new ThymeleafTemplateEngine();
        engine.setTemplateResolver(templateResolver());
        // 필요 시 메시지 리소스 설정 추가 기능
        return engine;
    }

    @Bean
    public ThymeleafViewResolver viewResolver() {
        ThymeleafViewResolver resolver = new ThymeleafViewResolver();
        resolver.setTemplateEngine(templateEngine());
        resolver.setOrder(1);
        return resolver;
    }
}
```

<hr>

## 컨트롤러 + 뷰 예시


```java
@Controller
public class MyController {

    @GetMapping("/hello")
    public String hello(Model model) {
        model.addAttribute("msg", "안녕하세요, Thymeleaf + Spring!");
        return "hello";  // hello.html 이 템플릿으로 렌더링됨
    }
}
```

<br>

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Hello</title>
</head>
<body>
  <h1 th:text="${msg}">메시지가 없습니다</h1>
</body>
</html>
```

<hr>

## 추가 통합 기능

- Spring EL 통합: `${}` 표현식으로 모델 속성에 접근 가능함
- 폼 바인딩: `th:object`, `th:field`, `th:errors` 등을 써서 Spring의 커맨드 객체와 연동 가능
- 국제화: Spring의 `MessageSource`를 템플릿 메시지로 사용 가능함
- 컨버전 서비스 및 유효성 검사: Spring의 `ConversionService`나 검증과 함께 쓸 수 있음

<hr>

## 주의할 점

- 설정이 조금 복잡할 수 있으므로, `ViewResolver` 우선수위나 템플릿 경로를 잘 관리해야 함
- 대규모 템플릿에서는 성능 고려 필요