---
layout: post
title: Retrieve()
date: 2025-11-24 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebClient]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## `retrieve()`란?

- WebClient 요청 후 응답을 받아서 응답 본문을 간단하게 추출하는 편리한 방식
- 내부적으로 `exchange()`를 호출하고 그 결과에서 본문만 디코딩해서 주는 shortcut 역할
- 기본적으로 HTTP 상태가 4xx, 5xx인 경우 `WebClientResponseException` 예외를 던짐
- 에러 응답을 커스터마이징하고 싶다면 `onStatus()` 핸들러를 제공할 수 있음

<hr>

## 주요 사용 시나리오 & 예시

#### 전체 응답을 `ResponseEntity`로 받기


```java
WebClient client = WebClient.create("https://example.org");

Mono<ResponseEntity<Person>> result = client.get()
    .uri("/persons/{id}", id)
    .accept(MediaType.APPLICATION_JSON)
    .retrieve()
    .toEntity(Person.class);
```

<br>

## 단순 본문만 `Mono<T>`로 받기

```java

Mono<Person> result = client.get()
    .uri("/persons/{id}", id)
    .accept(MediaType.APPLICATION_JSON)
    .retrieve()
    .bodyToMono(Person.class);
```