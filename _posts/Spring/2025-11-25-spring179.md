---
layout: post
title: Request Body
date: 2025-11-25 09:00:00 +09:00
categories: [Spring, Reactive Stack, WebClient]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- WebClient는 리액티브 스트림 또는 다른 타입을 사용해서 HTTP 요청의 바디를 보낼 수 있음
- 바디를 설정할 때 `body(..)`, `bodyValue(..)` 또는 `syncBody(..)` 메서드를 사용
- 다양한 미디어 타입을 자동 또는 명시적으로 지정 가능함 

<hr>

## 주요 사용 패턴 및 예시

#### 일반 객체

```java
// Mono를 바디로 보내는 예시
Mono<Person> personMono = Mono.just(new Person("John", "Doe"));
Mono<Void> response = webClient.post()
    .uri("/persons")
    .contentType(MediaType.APPLICATION_JSON)
    .body(personMono, Person.class)
    .retrieve()
    .bodyToMono(Void.class);
```

- 이 방식은 WebClient가 내부적으로 `HttpMessageWriter`를 사용해 `Person` 객체를 JSON 등으로 인코딩하여 전송함
- `Flux<T>`도 같은 방식으로 스트림 형태의 데이터 전송에 사용할 수 있음

```java
Flux<Person> peopleFlux = Flux.just(person1, person2, …);
webClient.post()
    .uri("/bulk")
    .contentType(MediaType.APPLICATION_STREAM_JSON)
    .body(peopleFlux, Person.class)
    .retrieve()
    .bodyToMono(Void.class);
```

<br>

#### 폼 데이터 전송