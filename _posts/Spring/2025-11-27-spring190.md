---
layout: post
title: TestExecutionListener
date: 2025-11-27 09:00:00 +09:00
categories: [Spring, Testing]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 기본 리스너

| `ServletTestExecutionListener` | Web 어플리케이션 테스트 시 Servlet API mock 설정 및 초기화. WebApplicationContext 기반 테스트 지원 |
| `DirtiesContextBeforeModesTestExecutionListener` | 테스트 전에 `@DirtiesContext` 어노테이션이 지정된 경우 "before" 모드 처리 |
| `ApplicationEventsTestExecutionListener` | Spring의 어플리케이션 이벤트 발행/처리를 테스트 컨텍스트 안에서 지원 |
| `DependencyInjectionTestExecutionListener` | 테스트 클래스에 `@Autowired`, `@Value` 등을 사용한 의존성 주입 지원 |
| `MicrometerObservationTestExecutionListerner` | 매트릭, 관측 레지스트리 설정을 지원 |
| `DirtiesContextTestExecutionListener` | `@DirtiesContext` 어노테이션이 지정된 경우 "after" 모드 처리 - 테스트 후 컨트롤러 / 재초기화 |
| `TransactionalTestExecutionListener` | 트랜잭션 관련 테스트 실행을 지원, 테스트 메서드 실행 전 트랜잭션 시작, 기본적으로 롤백, 필요 시 커밋 |
| `SqlScriptsTestExecutionListener` | `@Sql` 어노테이션을 처리해 테스트 실행 전후에 SQL 스크립트를 실행 |
| `EventPublishingTestExecutionListener` | 테스트 컨텍스트 내에서 이벤트 발행 기능을 지원 |

<hr>

## 리스너 커스터마이즈 및 설정 방법

#### `@TestExecutionListeners` 어노테이션 사용

- 테스트 클래스 또는 그 하위 클래스, 중첩 클래스 등에 대해 커스텀 `TestExecutionListener`를 지정할 수 있음

```java
@TestExecutionListeners(
  listeners = MyCustomListener.class,
  mergeMode = MergeMode.MERGE_WITH_DEFAULTS
)
public class MyTest { … }
```

- `mergeMode = MERGE_WITH_DEFAULTS`를 지정하면, 기본 리스너 세트와 커스텀 리스터를 병합해서 사용
- 만약 기본 리스너를 완전히 대체하고 싶다면 `inheritListeners = false` + 빈 listeners 배열로 지정 가능

<hr> 