---
layout: post
title: TestExecutionListener Configuration
date: 2025-12-01 09:00:00 +09:00
categories: [Spring, Testing, TestContext Framework, Context Management]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 기본 개념 & 역할

- TestExecutionListener는 테스트 실행 시점에 훅을 걸어, 의존성 주입, 트랜잭션 설정, SQL 스크립트 실행, 컨텍스트 초기화/정리 등 여러 작업을 자동으로 처리하는 구성요소
- TestContext Framework는 기본적으로 여러 TestExecutionListener 구현들을 자동으로 등록해 두고 있으며 - 우리가 따로 설정하지 않아도 대부분의 테스트에서 필요한 기능이 동작함

<hr>

## 기본 등록되는 TestExecutionListener 들

| 리스너 이름 | 주요 역할 |
|-|-|
| `ServletTestExecutionListener` | Web 어플리케이션 테스트 시 서블릿 API용 mock 객체 설정, WebApplicationContext 테스트 지원 |
| `DirtiesContextBeforeModesTestExecutionListener` | `@DirtiesContext` 어노테이션이 붙은 경우, before 모드 처리 - 테스트 전에 컨텍스트 더럽힘 표시 |
| `ApplicationEventsTestExecutionListener` | 테스트 중에 `ApplicationContext`에서 발생하는 이벤트 지원 |
| `BeanOverrideTestExecutionListener` | 테스트 빈 오버라이딩을 허용하거나 관리하는 기능 제공 |
| `DependencyInjectionTestExecutionListener` | 테스트 인스턴스에 `@Autowired`, `@Value, `@Inject` 등을 사용한 의존성 주입 지원 |
| `MicrometerObservationRegistryTestExecutionListener` | 만약 Micrometer 관측 기능을 테스트에 포함했다면, 관측 레지스트리 설정 지원 |
| `DirtiesContextTestExecutionListener` | `@DirtiesContext` 어노테이션이 붙은 경우, after 모드 처리 - 테스트 후에 컨텍스트 더럽힘 표시 |
| `CommonCachesTestExecutionListener` | 리소스/캐시 캐시된 항목들을 정리 - 캐스 관련 리소스 누구 방지 등에 사용됨 |
| `TransactionalTestExecutionListener` | 테스트 메서드 실행 시 트랜잭션을 시작하고, 기본적으로 롤백 - DB를 테스트 이전 상태로 유지 |
| `SqlScriptsTestExecutionListener` | `@Sql` 어노테이션으로 지정된 SQL 스크립트들을 테스트 전/후 실행
| `EventPublishingTestExecutionListener` | 테스트 실행 생명주기 이벤트를 Spring `ApplicationContext`에 게시하여, 이벤트 리스너가 이를 구독 가능하게 함 | 
| `MockitoResetTestExecutionListener` | `@MockBean`, `@MockitoBean` 등을 사용해 생성된 mock/spy bean을 테스트 후 리셋하는 기능 제공 |