---
layout: post
title: Context Configuration with XML
date: 2025-12-01 09:00:00 +09:00
categories: [Spring, Testing, TestContext Framework, Context Management]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---


## 개념

- Spring 테스트에서는 어플리케이션의 `Applicationcontext`를 실제 테스트용으로 로드해서 사용 가능
- 이때 설정 방식 중 하나로, 기존 프로젝트에서 사용하던 XML 설정 파일을 그대로 재사용할 수 있음
- 테스트 클래스에서는 특별히 상속이나 복잡한 설정 없이, 어노테이션만으로 컨텍스트 설정을 지정할 수 있어서 테스트 작성이 간결해짐

<hr>

## `@ContextConfiguration` 사용법

#### 기본 사용법

```java
@ExtendWith(SpringExtension.class)  // JUnit 5 환경에서 Spring과 연동
@ContextConfiguration(locations = { "/app-config.xml", "/test-config.xml" })
// 또는 @ContextConfiguration({ "/app-config.xml", "/test-config.xml" })
public class MyTest {
    // 테스트 코드 …
}
```

- 위 예시에서 `locations` 배열에 지정한 각 XML 파일이 클래스패스에서 로드되어 `ApplicationContext`가 생성됨
- 경로 규칙:
  - `"context.xml"`처럼 plain or 상대 경로 ➡️ 테스트 클래스가 속한 패키지를 기준으로 한 상태 클래스패스 리소스로 간주됨
  - `"/org/example/config.xml"`처럼 슬래시 시작 ➡️ 클래스패스 루트 기준의 절대 클래스패스 리소스로 간주됨
  - `"classpath:..."`, `"file:..."` 등 URL 접두사 있는 경로 ➡️ 그대로 리소스 위치로 사용됨

<br>

#### 기본값 사용

- 만약 `@ContextConfiguration`에 `locations` 또는 `value`를 지정하지 않으면, Spring은 기본 규칙을 사용해 XML 설정 파일을 유추할 수 있음
- 이 자동 유추 기능 덕분에 설정이 간단한 경우 `@ContextConfiguration`만 붙이면 되고, 별도 파일 지정이 필요 없음 