---
layout: post
title: Context Caching
date: 2025-12-03 09:00:00 +09:00
categories: [Spring, Testing, TestContext Framework, Context Management]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 존재 이유

- 스프링 어플리케이션에서 `ApplicationContext`가 커다란 비용이 될 수 있음
- 그래서 TestContext Framework는 한번 로드된 `ApplicationContext`를 static 캐시에 보관하고, 동일한 설정이 요구되는 이후 테스트에서 해당 cached context를 재사용하도록 설계되어 있음
- 이 캐싱 덕분에, 전체 테스트 수가 많아져도 context 초기화 비용을 반복하지 않아서, 테스트 실행 속도가 크게 단축될 수 있음 

<hr>

## 캐시 재사용 기준

| 항목 | 의미 |
|-|-|
| `locations` | `@ContextConfiguration(locations=...)`에 지정된 XML / 리소스 경로들 |
| `classes` | `@ContextConfiguration(classes=...)`에 지정된 자바 설정 클래스들 |
| `contextInitializerClasses` | `@ContextConfiguration(initializers=...)`에 지정된 context 초기화 |
| `contextCustomizers` | `ContextCustomizerFactory` 등이 제공하는 커스터마이저 |
| `contextLoader` | 어떤 컨텍스트 계층 |
| `parent` | 부모 컨텍스트 계층 |
| `activeProfiles` | `@ActiveProfiles`로 활성화된 프로파일 목록 |
| `propertySourceDesctiptors` / `propertySourceProperties` | `@TestPropertySource` 또는 프로퍼티 소스 추가 설정 |
| `resourceBasePath` | 웹 설정에서 `@WebAppConfiguration` 등으로 지정된 리소스 기본 경로 |