---
layout: post
title: TestContext Framework Support Classes
date: 2025-12-05 09:00:00 +09:00
categories: [Spring, Testing, TestContext Framework]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개념 & 목적

- TestContext Framework에는 테스트 코드를 더 간단하고 편리하게 작성할 수 있도록 돕는 여러 추상 클래스와 헬퍼/확장 클래스 들이 제공됨
- 즉, JUnit/TestNG + Spring + 복잡한 설정 조합을 매번 손수 설정하지 않아도, 이 클래스를 상속/사용하는 것만으로 표준화된 테스트 환경을 빠르게 구축할 수 있음

<hr>

## 주요 지원 클래스

| 클래스 | 대상/사용환경 | 제공 기능 |
|-|-|-|
| SpringExtension | JUnit Jupiter | `ExtendWith`만 붙이면 Spring TestContext Framework와 통합 | 
| `AbstractJUnit4SpringContextTests`, `AbstractTransactionalJUnit4SpringContextTests` | Junit 4/TestNG | 테스트 클래스 상속만으로 ApplicationContext + DI + untility 메서드 제공 |
| Spring + JDBC/DB 테스트용 클래스 | DB 연동 통합 테스트 | JDBC embadded database 설정, 테스트용 데이터 소스 제공, DAO/Repository 테스트를 쉽게 수행하도록 지원 |

<br>

#### SpringExtension이 제공하는 추가 편의점

- 테스트 클래스 생성자, 테스트 메서드, lifecycle 콜백 메서드 등에 의존성 주입 가능
- `@SpringJUniConfig`, `@SpringJUnitWebConfig` 같은 메타 어노테이션을 통한 설정 축약 제공

<hr>

## 장점

- 설정/코드 중복 제거 - 매번 `ApplicationContext` 생성, DI 설정, 트랜잭션 관리, cleanup 등을 수동을 쓰지 않아도 됨
- 일관된 테스트 환경 구축 - 다양한 테스트 클래스 간에도 동일한 방식으로 컨텍스트, 트랜잭션, 빈 조회 등이 가능
- IDE/컴파일러 도움 + 타입 안정성 - DI, 빈 조회 등 자바로 작성하기 때문에 오류 컴파일 타입에 잡기 쉬움
- 통합 테스트 + 단위 테슽 모두 커버 - 간단한 단위 테스트부터 데이터베이스 연동 통합 테스트, 웹 테스트까지 폭넓게 활용 가능

<hr>

## 주의사항

- 이런 추상 클래스/헬퍼에 의존하면 스프링 + 테스트 프레임워크 결합이 강해져서, 테스트가 스프링 컨텍스트에 깊이 의존하게 됨 ➡️ 유틸리티 클래스만 단위 테스트하고 싶은 경우 스프링 컨텍스트 로딩 오버헤드가 불필요할 수 있음
- 특히 Mock/Spy 빈 오버라이드, `@DirtiesContext`, custom context customizer/initializer, 캐시 등과 얽히면 context 캐싱이 깨지거나 설정 충돌이 생길 수 있음