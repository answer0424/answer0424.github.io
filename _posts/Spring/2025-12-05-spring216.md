---
layout: post
title: WebTestClient
date: 2025-12-05 09:00:00 +09:00
categories: [Spring, Testing, TestContext Framework]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- WebTestClient는 HTTP 요청을 보내고 응답을 검증할 수 있는 테스트 전용 HTTP 클라이언트
- 특징
  - 실제 서버 없이도 테스트 가능 - mock request/response 환경에서 동작
  - 실제 서버가 있는 상태에서도 엔드-투-엔드 테스트 가능 - 통합 테스트용 HTTP 호출 클라이언트로 활용
  - WebFlux 기반뿐 아니라, Spring MVC 환경에서도 사용 가능 - WebFlux가 아니어도 REST API 테스트에 사용하기 좋음

> 즉, WebTestClient는 서버 + 컨트롤러 + 핸들러 체인 + 직렬화/역직렬화 + HTTP layer 전체를 포함한 테스트를 가능하게 해주는 도구

<hr>

## 주요 방식

| 방식 | 언제/어떻게 사용 | 특징 |
|-|-|-|
| bindToController | 특정 컨틀롤러만 테스트할 때 | 해당 컨트롤러만 mock request/response 환경에서 호출 가능 |
| bindToApplicationContext | Spring 설정 전체 + MVC or WebFlux 환경 + 모든 컨트롤러 포함 테스트 | ApplicationContext를 통해 bean config를 로드하고, 실제처럼 handler chain 구성 |
| bindToRouterFunction | functional routing 기반 WebFlux 어플리케이션 테스트할 때 | WenFlux의 router  + handler function 기반 REST API를 테스트할 때 적합 |
| bindToServer | 실제 서버가 실행 중이거나 외부 서버 대상 테스트 시 | baseUrl 지정하고, HTTP over network 요청을 보내 통합 테스트 또는 E2E 테스트 가능 |