---
layout: post
title: Static import
date: 2025-12-09 09:00:00 +09:00
categories: [Spring, Testing, TestContext Framework, MockMvc, Hamcrest]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 핵심

- MockMvc를 이용해서 요청을 만들고 결과를 검증할 때, 메서드가 체인 형태로 이어지기 때문에 정적 메서드를 import 해두면 코드가 훨씬 간결하고 읽기 쉬워짐
- 예: `MockMvcRequestBuilders.get()`, `MockMvcResultMatchers.status().isOk()` 처럼 쓸 수 있는데 static import 덕분에 `get()`, `status().isOk()`만으로 표현 가능
- 공식 문서에서도 "When using MockMvc directly to perform requests, you'll need static imports for: `McokMvcBuilders.*`, `MockMvcRequestBuilders.*`, `MockMvcResultMatchers.*`, `MockMvcResultHandlers.*`" 라고 안내하고 있음

<hr>

## 대표적으로 import해야 할 것들

```java
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;
import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.*;
```

- `MockMvcBuilder.*`: MockMvc 인스턴스를 만들 때(standaloneSetup, webAppContextSetup)
- `MockMvcRequestBuilders.*`: HTTP 요청 메서드(get, post, put, delete 등) 및 요청 설정
- `MockMvcResultMatchers.*`: 응답 상태, 헤더, 본문, 쿠키 등 검증 메서드
- `MockMvcResultHandlers.*`: 응답 출력, 로깅 등 결과 처리 메서드

<hr>

## 예제

```java
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;
import static org.springframework.test.web.servlet.result.MockMvcResultHandlers.print;

@SpringBootTest
@AutoConfigureMockMvc
class MyControllerTest {

    @Autowired
    private MockMvc mockMvc;

    @Test
    void testHello() throws Exception {
        mockMvc.perform(get("/api/hello"))
               .andDo(print())
               .andExpect(status().isOk())
               .andExpect(content().string("Hello, world!"));
    }
}
```

- `get("/api/hello")`, `status().isOk()`, `content().string(...)`처럼 static import 덕분에 매우 읽기 쉽고 간결
- 만약 static import 없이 쓰면 `MockMvcRequestBuilders.get(...)`, `MockMvcResultMatchers.status().isOk()`, `MockMvcResultHandlers.print()` 등으로 매번 길게 써야 해서 가독성이 떨어짐

<hr>

## 유의사항

- IDE 사용 시 `favorite static members` / `static imports 자동완성` 기능을 등록해두면 편리
- 너무 많은 static import & 메서드 체인이 겹치면 가독성이 떨어질 수 있음
- 만약 사용하는 빌드 도구나 IDE가 static import 자동완성을 잘 지원하지 않는 경우, 오타나 import 누락으로 테스트가ㅏ 깨지기 쉬우니 주의필요
- test 코드에서만 사용되는 import이므로, prodution 코드에서는 사용하지 않도록 유지
- 변형된 테스트 스타일이나 다른 클라이언트를 함께 사용하는 경우, static import 방식이 필요 없거나 다를 수 있으므로 각 방식에 맞에 import 구성 주의