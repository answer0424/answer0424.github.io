---
layout: post
title: Configuring MockMvc
date: 2025-12-09 09:00:00 +09:00
categories: [Spring, Testing, TestContext Framework, MockMvc, Hamcrest]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## MockMvc 설정 방식

| 방식 | 설명 |
|-|-|
| `MockMvcBuilders.standaloneSetup()` | 특정 컨트롤러만 지정하고, 필요한 설정을 최소한으로 구성 ➡️ 스프링 MVC 인프라를 프로그래밍 방식으로 설정 |
| `MockMvcBuilders.webAppContextSetup()` | 실제 스프링 MVC 설정과 빈 컨텍스트를 로드한 뒤, 전체 어플리케이션 컨텍스트 기반으로 MockMvc 구성 ➡️ 필터, 인터셉터, 예외 핸들러 등 모든 설정 반영 |

<hr>

## 언제 어떤 방식을 사용하는 것이 좋을까

#### standaloneSetup: 가볍고 빠른 단위/슬라이스 테스트

- 컨트롤러 하나만 단위로 빠르게 테스트하고 싶을 때 - 서비스 리포지토리는 mock/stub으로 대체
- Spring MVC의 복잡한 설정, 필터, 인터셉터, 빈 주입이 필요없고, 요청 ➡️ 컨트롤러 ➡️ 응답 흐름 + JSON 직렬화/역직렬화 + validation 등을 단순 검증할 떄
- 테스트 속도가 중요하고, 설정 로딩 없이 가볍게 여러 테스트를 돌리고 싶을 때

> 장점: 속도 빠르고 설정 간단 / 테스트 집중 /  mock 사용 편리
>
> 단점: Spring MVC 전체 설정을 반영하지 않기 때문에 필터, interceptor, 예외 핸들러 등은 무시됨 ➡️ 이러한 설정이 동작하는지 검증하려면 WebApplicationContext 기반 테스트가 별도로 필요

