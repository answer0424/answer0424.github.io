---
layout: post
title: Async Requests
date: 2025-12-10 09:00:00 +09:00
categories: [Spring, Testing, TestContext Framework, MockMvc, Hamcrest]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---

## 개요

- Spring MVC는 Servlet 3.0 비동기 요청 처리를 지원함
- 즉, 요청 처리 중 원래 서블릿 쓰레드를 바로 반환하고 실제 응답은 다른 쓰레드에서 완료한 뒤 서블릿 컨테이너 쓰레드로 async dispatch 해서 응답을 마침
- `MockMvc` 만으로도 이 비동기 요청 처리 흐름을 시뮬레이션하고 테스트할 수 있음
  1. 요청을 perform 함
  2. 비동기 처리 시작됨 + 비동기 결과 등 초기 상태를 검사
  3. 반환된 결과(`MvcResult`)를 가지고 수동으로 async dispatch를 호출
  4. dispatch 후 최종 응답을 검증
- 만약 `MockMvc`를 통해서가 아니라 WebTestClient를 사용해 테스트한다면, 별도로 신경 쓸 필요 없음