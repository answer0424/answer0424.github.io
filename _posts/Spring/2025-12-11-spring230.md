---
layout: post
title: Integration
date: 2025-12-11 09:00:00 +09:00
categories: [Spring, Integration]
tags: [spring]
image:
    path: /assets/img/spring/Spring.png
---


## 개요

- RestClient - 동기, fluent API 기반 최신 클라이언트
- WebClient - 비동기/논블로킹 + fluent API
- RestTemplate - 과거부터 사용된 동기 템플릿 스타일 클라이언트
- HTTP Service Client - 인터페이스 + 어노테이션 기반 선언형 클라이언트 방식

<hr>

## 각 클라이언트의 특징 & 언제 쓰면 좋은지

#### RestClient

- 동기 방식, fluent API 제공 - 비교적 직관적이고 사용하기 쉬움
- HTTP 라이브러리, 메시지 컨버터, 기본 URL, 기본 헤더/쿠키, 인터셉터, 공통 URL 변수 등을 builder로 유연하게 설정 가능
- 요청 설정: HTTP 메서드 ➡️ `uri()` ➡️ 헤더, 바디, 쿠키, 버전, 인터셉터 등 ➡️ `retrieve()` 또는 `exchange()`로 실행
- 응답 처리: 
  - `retrieve().body(Class)` 또는 `retrieve().body(ParameterizedTypeReference)`로 본문 객체로 변환
  - `retrieve().toEntity(Class)`로 상태 + 헤더 + body 포함한 `ResponseEntity` 형태로 받기
  - 에러 상태에 대한 기본 예외 발생
- 더 낮은 수준 제어가 필요하면 `exchange()` 사용 - raw request/response 접근 + 사용자 지정 로직 가능
- multipart/form-data, 폼 인코딩, JSON 바디, 쿠키, 헤더 설정 등 다양한 HTTP 요청 시나리오 지원

<br>

#### WebClient

- 논블로킹 지원
- fluent API + 람다 스타일 사용 가능
- 고동시성/높은 부하/리액티브 스택 + REST 호출이 필요한 경우 적합

> 이벤트-기반, 논블로킹 처리가 필요하거나 비동기/스트리밍 + 높은 동시 요청 처리에 적합

<br>

#### RestTemplate

- 전통적인 동기 클라이언트이자 템플릿 기반 API 제공 / `getForObject()`, `postForEntity()`, `put`, `delete`, `exchange` 등 다양한 메서드 제공
- HTTP 라이브러리 추상화 제공
- 현재 유지보수 수준

> 기존 레거시 코드 호환, 간단한 REST 호출이 많고 비동기/리액티브가 필요 없는 상황이라면 쓰기 무난 다만 새로운 개발이라면 RestClient 또는 WebClient 권장

<br>

#### HTTP Service Clients

- Java 인터페이스에 어노테이션 붙임 ➡️ 프록시 생성 ➡️ 호출 시 HTTP 요청이 자동 실행
- 코드가 깔끔하고, 서비스 API를 자바 인터페이스로 추상화 + 타입 안전하게 다룰 수 있음
- 내부적으로는 RestClient, WebClient, RestTemplate 중 하나를 사용 - 즉, 동기/비동기 reactive 여부는 선택한 클라이언트에 따라 달라짐

> 외부 REST API 호출을 메서드 호출처럼 다루고 싶을 때, 선언형/인터페이스 기반으로 API 클라이언트를 구성하고 싶을 때 유용
>
> 유지보수성과 가독성을 높이고, 서비스 계층을 깔끔하게 구성할 수 있음

<hr>

## RestClient vs RestTemplate

- `RestClient`는 `RestTemplate`의 후속으로 같은 인프라 기반 + 보다 현대적 fluent API 제공
- 기존 `RestTemplate` 코드를 점진적으로 `RestClient`로 바꾸기 쉬움
- 예를 들어 `RestTemplate.getForObject()`는 `RestClient.get().uri().retrieve().body()`로 대응되고, `GetForEntity()`는 `.retrieve().toEntity()`로 대응됨

<hr>

## 간단 가이드

- RestClient: 단순 REST 호출, 동기 ↔️ 객체 직렬화, 역직렬화
- WebClient: 비동기/논블로킹/리액티브/많은 동시 요청/스트리밍 응답
- HTTP Service Clients: 외부 API 호출을 자바 메서드 호출처럼 선언형으로 유지보수/가독성 중요
- RestTemplate: 기존 RestTemplate 코드 ➡️ 점진적 마이그레이션 / 호환